<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Heartbeat Radio</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400&display=swap');
:root {
    --bg-color: #f0f8ff;
    --main-color: #ffffff;
    --accent-color: #87CEEB;
    --text-color: #333;
    --light-text-color: #777;
    --border-color: #e0f0ff;
    --chat-bg-image: url('https://image.pollinations.ai/prompt/dreamcore%20aesthetic%20soft%20clouds%20pastel%20blue%20sky%20liminal%20space%20no%20people');
    --avatar-fit: cover;
    --background-fit: cover;
}
:root.dark-mode {
    --bg-color: #1a1a2e;
    --main-color: #16213e;
    --accent-color: #0f3460;
    --text-color: #e6e6e6;
    --light-text-color: #a8a8a8;
    --border-color: #2d4059;
}
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: var(--bg-color);
    font-family: 'Noto Sans SC', sans-serif;
    padding: 5px;
    transition: background-color 0.3s ease;
    overflow: hidden;
}
.container {
    width: 100%;
    height: 100vh;
    max-height: 700px;
    background-color: var(--main-color);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(135, 206, 235, 0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    border: 2px solid var(--border-color);
    transition: all 0.3s ease;
}
.main-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}
.header {
    padding: 15px 20px;
    border-bottom: 2px solid var(--border-color);
    text-align: center;
    position: relative;
    transition: border-color 0.3s ease;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}
.header-title {
    color: var(--accent-color);
    font-weight: 400;
    font-size: 1.2em;
    letter-spacing: 2px;
    transition: color 0.3s ease;
}
.current-status-display {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background-color: rgba(135, 206, 235, 0.1);
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
    margin: 0 auto;
}
.current-status-display:hover {
    background-color: rgba(135, 206, 235, 0.2);
}
.current-status-emoji {
    font-size: 1.2em;
}
.current-status-text {
    font-size: 0.9em;
    color: var(--text-color);
}
.chat-area {
    flex: 1;
    display: flex;
    position: relative;
    overflow: hidden;
}
.chat-window {
    flex: 1;
    padding: 20px;
    display: flex;
    flex-direction: column;
    background-image: var(--chat-bg-image);
    background-size: var(--background-fit);
    background-position: center;
    background-blend-mode: overlay;
    background-color: rgba(255, 255, 255, 0.7);
    transition: background-image 0.5s ease;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
}
.chat-window::-webkit-scrollbar {
    display: none;
}
:root.dark-mode .chat-window {
    background-color: rgba(22, 33, 62, 0.7);
}
.message-container {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    margin-bottom: 15px;
    max-width: 100%;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeIn 0.5s ease forwards;
    position: relative;
}
.message-container.user-message {
    flex-direction: row-reverse;
}
.message-container.user-message .message-avatar {
    margin-right: 0;
    margin-left: 10px;
}
.message-container.user-message .message-content {
    align-items: flex-end;
}
.message-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    object-fit: var(--avatar-fit);
    border: 2px solid var(--accent-color);
    flex-shrink: 0;
    transition: border-color 0.3s ease;
}
.message-content {
    display: flex;
    flex-direction: column;
    max-width: 80%;
    position: relative;
}
@keyframes fadeIn {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
.action-text {
    font-size: 0.8em;
    color: var(--light-text-color);
    margin-bottom: 5px;
    padding-left: 10px;
    font-style: italic;
    min-height: 1.2em;
    transition: color 0.3s ease;
}
.message-bubble {
    background-color: rgba(255, 255, 255, 0.5);
    color: var(--text-color);
    padding: 10px 15px;
    border-radius: 18px 18px 18px 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    line-height: 1.5;
    word-wrap: break-word;
    transition: background-color 0.3s ease, color 0.3s ease;
    position: relative;
}
.message-container.user-message .message-bubble {
    border-radius: 18px 18px 5px 18px;
    background-color: rgba(135, 206, 235, 0.5);
}
.message-emoji {
    position: absolute;
    bottom: -5px;
    right: -5px;
    font-size: 1.2em;
    opacity: 0;
    transform: scale(0.5);
    animation: emojiPop 0.8s ease forwards;
    z-index: 5;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    width: 25px;
    height: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
:root.dark-mode .message-emoji {
    background: rgba(22, 33, 62, 0.8);
}
@keyframes emojiPop {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    50% {
        opacity: 1;
        transform: scale(1.2);
    }
    100% {
        opacity: 0;
        transform: scale(0.8);
    }
}
.user-input-panel {
    padding: 15px;
    border-top: 2px solid var(--border-color);
    display: flex;
    flex-direction: column;
    gap: 10px;
    background-color: var(--main-color);
    transition: background-color 0.3s ease;
}
.user-input-toggle {
    padding: 10px 15px;
    background-color: var(--accent-color);
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9em;
    transition: background-color 0.3s;
    text-align: center;
}
.user-input-toggle:hover {
    background-color: #76c3e2;
}
.user-options {
    display: none;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}
.user-options.active {
    display: flex;
}
.user-option {
    padding: 8px 12px;
    background-color: rgba(135, 206, 235, 0.1);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: 15px;
    cursor: pointer;
    font-size: 0.8em;
    transition: all 0.3s;
    text-align: center;
    flex: 1;
    min-width: 120px;
    max-width: 180px;
}
.user-option:hover {
    background-color: rgba(135, 206, 235, 0.2);
    transform: translateY(-2px);
}
.sidebar {
    position: fixed;
    right: 0;
    top: 0;
    height: 100%;
    width: 85%;
    max-width: 320px;
    background-color: #f7fcff;
    border-left: 2px solid var(--border-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 15px;
    justify-content: flex-start;
    z-index: 100;
    transform: translateX(100%);
    transition: transform 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
    overflow-y: auto;
}
:root.dark-mode .sidebar {
    background-color: #1a2a4a;
}
.sidebar.expanded {
    transform: translateX(0);
}
.sidebar-toggle {
    display: block;
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 101;
    background: var(--accent-color);
    color: white;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 1.5em;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
.status-panel-title {
    font-weight: 400;
    color: var(--accent-color);
    margin-bottom: 20px;
    font-size: 1.2em;
    writing-mode: horizontal-tb;
    letter-spacing: 3px;
    transition: opacity 0.3s ease, color 0.3s ease;
}
.avatar-upload-container,
.background-upload-container,
.night-mode-container {
    margin-top: 30px;
    text-align: center;
    transition: opacity 0.3s ease;
    width: 100%;
}
.avatar-upload-label,
.background-upload-label,
.user-avatar-upload-label {
    display: inline-block;
    padding: 10px 20px;
    background-color: var(--accent-color);
    color: white;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.3s;
    margin-bottom: 10px;
    width: 90%;
}
.avatar-upload-label:hover,
.background-upload-label:hover,
.user-avatar-upload-label:hover {
    background-color: #76c3e2;
}
:root.dark-mode .avatar-upload-label:hover,
:root.dark-mode .background-upload-label:hover,
:root.dark-mode .user-avatar-upload-label:hover {
    background-color: #1a5080;
}
#avatar-upload,
#background-upload,
#user-avatar-upload {
    display: none;
}
.avatar-fill-mode-container,
.background-fill-mode-container {
    margin-top: 10px;
    width: 90%;
    text-align: left;
}
.avatar-fill-mode-container label,
.background-fill-mode-container label {
    font-size: 0.8em;
    color: var(--text-color);
    margin-bottom: 5px;
    display: block;
}
.avatar-fill-mode-container select,
.background-fill-mode-container select {
    width: 100%;
    padding: 5px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    background-color: var(--main-color);
    color: var(--text-color);
}
.switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
}
.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}
.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}
.slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}
input:checked + .slider {
    background-color: var(--accent-color);
}
input:checked + .slider:before {
    transform: translateX(26px);
}
.night-mode-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}
.night-mode-label {
    font-size: 0.9em;
    color: var(--text-color);
}
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 1;
    transition: opacity 0.5s;
}
.modal-window {
    background: var(--main-color);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    width: 90%;
    max-width: 400px;
    transform: scale(0.9);
    transition: transform 0.3s, background-color 0.3s ease;
}
.modal-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}
.modal-overlay.hidden .modal-window {
    transform: scale(0.8);
}
.modal-title {
    margin-bottom: 20px;
    color: var(--accent-color);
    font-size: 1.2em;
    transition: color 0.3s ease;
}
.modal-input {
    width: 100%;
    padding: 10px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 1em;
    text-align: center;
    background-color: var(--main-color);
    color: var(--text-color);
    transition: all 0.3s ease;
}
.modal-button {
    background: var(--accent-color);
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    transition: background 0.3s;
}
.modal-button:hover {
    background: #76c3e2;
}
.status-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--main-color);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    padding: 30px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    align-items: center;
    width: 90%;
    max-width: 400px;
    border: 2px solid var(--border-color);
}
.status-panel.active {
    display: flex;
}
.status-panel-title {
    margin-bottom: 20px;
    color: var(--accent-color);
    font-size: 1.2em;
}
.dial-container {
    position: relative;
    width: 280px;
    height: 280px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 20px 0;
    transition: opacity 0.3s ease;
}
.status-dial {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: linear-gradient(145deg, #ffffff, #e6f7ff);
    box-shadow: 5px 5px 10px #d9eef7, -5px -5px 10px #ffffff;
    position: relative;
    aspect-ratio: 1 / 1;
    display: flex;
    justify-content: center;
    align-items: center;
}
:root.dark-mode .status-dial {
    background: linear-gradient(145deg, #1a2a4a, #16213e);
    box-shadow: 5px 5px 10px #0d1b2a, -5px -5px 10px #1b263b;
}
.dial-center {
    position: absolute;
    width: 20px;
    height: 20px;
    background: var(--accent-color);
    border-radius: 50%;
    border: 3px solid white;
    transition: background-color 0.3s ease;
    z-index: 5;
}
.status-buttons-container {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.status-button {
    position: absolute;
    width: 60px;
    height: 60px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--light-text-color);
    font-size: 0.8em;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 10;
    border-radius: 50%;
    transition: all 0.3s ease;
    background-color: rgba(255, 255, 255, 0.8);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 2px solid transparent;
    padding: 5px;
}
:root.dark-mode .status-button {
    background-color: rgba(26, 42, 74, 0.8);
    color: #b8b8b8;
}
.status-button:hover {
    transform: scale(1.1);
    background-color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
:root.dark-mode .status-button:hover {
    background-color: rgba(26, 42, 74, 0.9);
}
.status-button.active {
    color: var(--accent-color);
    font-weight: bold;
    border: 2px solid var(--accent-color);
    background-color: rgba(135, 206, 235, 0.1);
    box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.3);
}
:root.dark-mode .status-button.active {
    background-color: rgba(15, 52, 96, 0.3);
}
.status-button[data-status="resting"] { 
    top: 10%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.status-button[data-status="eating"] { 
    top: 30%;
    right: 10%;
    transform: translate(50%, -50%);
}
.status-button[data-status="working"] { 
    bottom: 30%;
    right: 10%;
    transform: translate(50%, 50%);
}
.status-button[data-status="emo"] { 
    bottom: 10%;
    left: 50%;
    transform: translate(-50%, 50%);
}
.status-button[data-status="sleeping"] { 
    bottom: 30%;
    left: 10%;
    transform: translate(-50%, 50%);
}
.status-button[data-status="intimate"] { 
    top: 30%;
    left: 10%;
    transform: translate(-50%, -50%);
}
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    display: none;
}
.overlay.active {
    display: block;
}
@media (min-width: 769px) {
    body {
        padding: 20px;
    }
    .container {
        flex-direction: row;
        height: 90vh;
        max-width: 800px;
    }
    .sidebar {
        position: static;
        width: 200px;
        max-width: none;
        transform: translateX(0);
        border-radius: 0;
        box-shadow: none;
    }
    .sidebar-toggle {
        display: none;
    }
    .status-panel-title {
        writing-mode: vertical-rl;
        text-orientation: mixed;
        font-size: 1em;
    }
    .avatar-upload-label,
    .background-upload-label,
    .user-avatar-upload-label {
        padding: 8px 15px;
        font-size: 0.8em;
    }
    .header {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
}
@media (max-width: 480px) {
    .sidebar {
        width: 90%;
    }
    .header-title {
        font-size: 1em;
    }
    .dial-container {
        width: 240px;
        height: 240px;
    }
    .status-button {
        width: 50px;
        height: 50px;
        font-size: 0.7em;
    }
    .user-option {
        min-width: 100px;
        font-size: 0.75em;
    }
}
</style>
</head>
<body>
<div class="modal-overlay" id="name-modals">
    <div class="modal-window" id="user-modal">
        <p class="modal-title">欢迎使用电波通讯系统<br>请登记您的名称</p>
        <input type="text" id="user-name-input" class="modal-input" placeholder="你的名字">
        <button id="submit-user-name" type="button" class="modal-button">确认</button>
    </div>
    <div class="modal-window" id="char-modal" style="display: none;">
        <p class="modal-title">请将电波指向想要链接的角色<br>ta的名字是...</p>
        <input type="text" id="char-name-input" class="modal-input" placeholder="Ta的名字">
        <button id="submit-char-name" type="button" class="modal-button">进入连接</button>
    </div>
</div>
<div class="overlay" id="status-overlay"></div>
<div class="status-panel" id="status-panel">
    <h3 class="status-panel-title">选择状态</h3>
    <div class="dial-container">
        <div class="status-dial">
            <div class="dial-center"></div>
            <div class="status-buttons-container">
                <button class="status-button" data-status="resting" data-angle="0">休息中</button>
                <button class="status-button" data-status="eating" data-angle="72">吃饭中</button>
                <button class="status-button" data-status="working" data-angle="144">工作中</button>
                <button class="status-button" data-status="emo" data-angle="216">emo中</button>
                <button class="status-button" data-status="sleeping" data-angle="288">睡前</button>
                <button class="status-button" data-status="intimate" data-angle="360">亲密时间</button>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="main-panel">
        <div class="header">
            <p class="header-title">HEARTBEAT RADIO</p>
            <div class="current-status-display" id="current-status-display">
                <span class="current-status-emoji" id="current-status-emoji">💤</span>
                <span class="current-status-text" id="current-status-text">休息中</span>
            </div>
        </div>
        <div class="chat-area">
            <div class="chat-window" id="chat-window">
                <div class="message-container" id="msg-template" style="display: none;">
                    <img class="message-avatar" src="" alt="角色头像">
                    <div class="message-content">
                        <div class="action-text"></div>
                        <div class="message-bubble"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="user-input-panel">
            <button class="user-input-toggle" id="user-input-toggle">发送消息</button>
            <div class="user-options" id="user-options">
                <button class="user-option" data-option="like">我喜欢你</button>
                <button class="user-option" data-option="angry">感觉有点生气</button>
                <button class="user-option" data-option="sick">我生病了……</button>
                <button class="user-option" data-option="call">叫{charName}</button>
                <button class="user-option" data-option="coquetry">【撒撒娇】</button>
            </div>
        </div>
    </div>
    <button class="sidebar-toggle" id="sidebar-toggle">⚙️</button>
    <div class="sidebar" id="sidebar">
        <p class="status-panel-title">设置面板</p>
        <div class="avatar-upload-container">
            <label for="user-avatar-upload" class="user-avatar-upload-label">上传我的头像</label>
            <input type="file" id="user-avatar-upload" accept="image/*">
        </div>
        <div class="avatar-upload-container">
            <label for="avatar-upload" class="avatar-upload-label">上传角色头像</label>
            <input type="file" id="avatar-upload" accept="image/*">
            <div class="avatar-fill-mode-container">
                <label for="avatar-fill-mode">头像填充方式：</label>
                <select id="avatar-fill-mode">
                    <option value="cover">裁剪适应</option>
                    <option value="contain">完整显示</option>
                    <option value="fill">拉伸填充</option>
                </select>
            </div>
        </div>
        <div class="background-upload-container">
            <label for="background-upload" class="background-upload-label">上传聊天背景</label>
            <input type="file" id="background-upload" accept="image/*">
            <div class="background-fill-mode-container">
                <label for="background-fill-mode">背景填充方式：</label>
                <select id="background-fill-mode">
                    <option value="cover">裁剪适应</option>
                    <option value="contain">完整显示</option>
                    <option value="fill">拉伸填充</option>
                </select>
            </div>
        </div>
        <div class="night-mode-container">
            <span class="night-mode-label">夜间模式</span>
            <label class="switch">
                <input type="checkbox" id="night-mode-toggle">
                <span class="slider"></span>
            </label>
        </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    let userName = '你';
    let charName = 'Ta';
    let currentStatus = 'resting';
    let ambientInterval;
    let recentMessages = [];
    let charAvatar = '';
    let userAvatar = '';
    let chatBackground = '';
    let isDarkMode = false;
    
    const chatWindow = document.getElementById('chat-window');
    const userModal = document.getElementById('user-modal');
    const charModal = document.getElementById('char-modal');
    const nameModals = document.getElementById('name-modals');
    const userNameInput = document.getElementById('user-name-input');
    const charNameInput = document.getElementById('char-name-input');
    const submitUserNameBtn = document.getElementById('submit-user-name');
    const submitCharNameBtn = document.getElementById('submit-char-name');
    const avatarUpload = document.getElementById('avatar-upload');
    const userAvatarUpload = document.getElementById('user-avatar-upload');
    const backgroundUpload = document.getElementById('background-upload');
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const nightModeToggle = document.getElementById('night-mode-toggle');
    const avatarFillSelect = document.getElementById('avatar-fill-mode');
    const backgroundFillSelect = document.getElementById('background-fill-mode');
    const statusPanel = document.getElementById('status-panel');
    const statusOverlay = document.getElementById('status-overlay');
    const currentStatusDisplay = document.getElementById('current-status-display');
    const currentStatusEmoji = document.getElementById('current-status-emoji');
    const currentStatusText = document.getElementById('current-status-text');
    const statusButtons = document.querySelectorAll('.status-button');
    const userInputToggle = document.getElementById('user-input-toggle');
    const userOptions = document.getElementById('user-options');
    const userOptionButtons = document.querySelectorAll('.user-option');
    
    currentStatusDisplay.addEventListener('click', () => {
        statusPanel.classList.toggle('active');
        statusOverlay.classList.toggle('active');
    });
    
    statusOverlay.addEventListener('click', () => {
        statusPanel.classList.remove('active');
        statusOverlay.classList.remove('active');
    });
    
    sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('expanded');
    });
    
    userInputToggle.addEventListener('click', () => {
        userOptions.classList.toggle('active');
    });
    
    chatWindow.addEventListener('click', (e) => {
        if (nameModals.classList.contains('hidden')) {
            if (!userOptions.contains(e.target) && !userInputToggle.contains(e.target)) {
                userOptions.classList.remove('active');
                displayAmbientMessage();
            }
        }
    });
    
    nightModeToggle.addEventListener('change', () => {
        isDarkMode = nightModeToggle.checked;
        document.documentElement.classList.toggle('dark-mode', isDarkMode);
        localStorage.setItem('heartbeatRadioDarkMode', isDarkMode);
    });
    
    avatarFillSelect.addEventListener('change', e => {
        document.documentElement.style.setProperty('--avatar-fit', e.target.value);
        localStorage.setItem('heartbeatRadioAvatarFit', e.target.value);
    });
    
    backgroundFillSelect.addEventListener('change', e => {
        document.documentElement.style.setProperty('--background-fit', e.target.value);
        localStorage.setItem('heartbeatRadioBackgroundFit', e.target.value);
    });
    
    const savedDarkMode = localStorage.getItem('heartbeatRadioDarkMode');
    if (savedDarkMode !== null) {
        isDarkMode = savedDarkMode === 'true';
        nightModeToggle.checked = isDarkMode;
        document.documentElement.classList.toggle('dark-mode', isDarkMode);
    }
    
    const savedAvatarFit = localStorage.getItem('heartbeatRadioAvatarFit');
    if (savedAvatarFit) {
        document.documentElement.style.setProperty('--avatar-fit', savedAvatarFit);
        avatarFillSelect.value = savedAvatarFit;
    }
    
    const savedBackgroundFit = localStorage.getItem('heartbeatRadioBackgroundFit');
    if (savedBackgroundFit) {
        document.documentElement.style.setProperty('--background-fit', savedBackgroundFit);
        backgroundFillSelect.value = savedBackgroundFit;
    }
    
    const dialogues = {
        'eating': {
            'initial': [
                { 'text': '在吃饭吗？我好像闻到香味飘过来了。', 'action': '*{charName} 像只小动物一样在你身边嗅了嗅，嘴角带着温柔的笑意*', 'emoji': '💬' },
                { 'text': '已经到吃饭的时间了吗？今天要好好补充营养，多吃一点，{userName}。', 'action': '*{charName} 很自然地帮你把散落在脸颊旁边的头发别到耳后*', 'emoji': '❤️' },
                { 'text': '今天的饭菜是{userName}喜欢的吗？不管是什么，都要慢慢吃，不许狼吞虎咽……最好也不要挑食哦。', 'action': '*{charName} 用指尖轻轻点了点你的鼻尖，语气里满是宠溺*', 'emoji': '🥰' },
                { 'text': '我听到碗筷碰撞的清脆声音了…今天吃的是什么呢？', 'action': '*{charName} 歪着头，饶有兴趣地猜测着*', 'emoji': '💭' },
                { 'text': '嗯……看着你吃饭的样子，我也感觉有点饿了呢。', 'action': '{charName} 撑着脸看向{userName}', 'emoji': '❤️' },
                { 'text': '开动啦？要好好吃饭哦。', 'action': '{charName} 的声音带着温柔的笑意', 'emoji': '🍚' },
                { 'text': '{userName}……现在是在吃什么好吃的呢？', 'action': '{charName} 好奇地看了过来', 'emoji': '🍱' },
                { 'text': '今天的饭菜……比我更吸引你吗？不可以哦，你的注意力只能是我的。', 'action': '*{charName} 开着玩笑，但听起来又不太像玩笑*', 'emoji': '🍴' },
                { 'text': '是一个人吃吗？太好了…我总担心你吃饭的时候，对面会坐着我不认识的人。', 'action': '*{charName} 像是在确认什么，松了口气*', 'emoji': '💭' },
            ],
            'ambient': [
                { 'text': '味道怎么样？合你的口味吗？', 'action': '*{charName} 凑得很近，几乎能感受到Ta说话时呼出的气息*', 'emoji': '💬' },
                { 'text': '今天的菜色看起来真不错，颜色搭配得也很好看。', 'action': '*{charName} 像个美食评论家一样煞有介事地点评着*', 'emoji': '✨' },
                { 'text': '好吃吗？比我做的饭还要好吃吗……？', 'action': '*{charName} 像一只在试探的猫，语气里带着小小的嫉妒*', 'emoji': '💭' },
                { 'text': '你的嘴边沾到酱汁了……真想帮你舔掉。只有我能这么做，对吧？', 'action': '*{charName} 的声音压得很低，充满了暗示*', 'emoji': '❤️' },
                { 'text': '吃饱了就把注意力放在我身上吧？我比你的食物更需要你呢。', 'action': '*{charName} 的声音带着一丝撒娇般的催促*', 'emoji': '❤️' },
                { 'text': '要不要喝点水？还是想喝果汁？我去给你拿。', 'action': '*{charName} 已经准备起身，随时为你服务*', 'emoji': '🍹' },
                { 'text': '我嫉妒那双筷子，它们刚才碰到你的嘴唇了。', 'action': '*{charName} 的声音有些酸溜溜的*', 'emoji': '💬' },
                { 'text': '你在为我好好补充能量，对吗？因为待会，你需要很多力气……来应付我。', 'action': '*{charName} 的语气有些不怀好意*', 'emoji': '💘' },
                { 'text': '{userName}……你吃东西的时候，两边的腮帮子会微微鼓起来，像只可爱的小仓鼠一样。', 'action': '*{charName} 撑着下巴，目不转睛地看着你，眼神里满是笑意*', 'emoji': '❤️' },
                { 'text': '啊——张嘴，我喂你一口……好吧，开玩笑的，不过真想这么做一次呢。', 'action': '*{charName} 拿着自己的勺子比划了一下*', 'emoji': '🥰' },
                { 'text': '里面有不爱吃的菜吗？偷偷告诉我，我可以帮你消灭掉。', 'action': '*{charName} 压低声音，像是在跟你商量什么秘密计划*', 'emoji': '💭' },
                { 'text': '像这样看着你吃饭，感觉一整天都会很有精神。', 'action': '*{charName} 轻声说着，仿佛在陈述一个简单又幸福的事实*', 'emoji': '🥰' },
                { 'text': '吃饱了才有力气……嗯，才有力气想我。', 'action': '*{charName} 说到一半故意停顿了一下，然后凑到你耳边小声补充道*', 'emoji': '💕' },
                { 'text': '让我猜猜……今天一定有你喜欢吃的吧？看你满足的表情就知道了。', 'action': '*{charName} 一副"我早就看穿一切"的得意模样*', 'emoji': '😉' },
                { 'text': '吃完饭，要不要来点饭后甜点？我买了草莓大福。', 'action': '*{charName} 用甜食诱惑着你*', 'emoji': '🍓' },
                { 'text': '不许剩下哦，浪费食物可不是好孩子。最后一口也要好好吃掉。', 'action': '*{charName} 像个小管家一样，认真地监督着你*', 'emoji': '📋' },
                { 'text': '你的嘴角沾到酱汁了，别动，我帮你擦掉。', 'action': '*{charName} 很自然地伸出拇指，轻轻揩去你唇角的酱汁，指腹的温度一触即逝*', 'emoji': '❤️' },
                { 'text': '一想到你正在世界的某个角落里好好吃饭，我就觉得很安心，很踏实。', 'action': '*{charName} 的声音很轻，但充满了安定的力量*', 'emoji': '💕' },
                { 'text': '今天也乖乖吃饭了，奖励你一朵小红花……贴在这里。', 'action': '*{charName} 用手指在你的额头上轻轻点了一下，像是在盖章*', 'emoji': '🌸' },
                { 'text': '下次我们一起去逛超市吧，买你喜欢吃的菜，回来我做给你吃。', 'action': '*{charName} 正在脑海里规划未来的约会*', 'emoji': '🛒' },
                { 'text': '我刚刚突然在想，如果把你喂胖一点，抱起来的手感会不会更好？啊抱歉，你会讨厌这样吗？', 'action': '*{charName} 一本正经地思考着这个"严肃"的问题*', 'emoji': '🤔' },
                { 'text': '等你吃完饭以后，我们稍微站一会儿、或者在房间里走两步？这样对胃比较好。', 'action': '*{charName} 开启了养生小课堂模式*', 'emoji': '' },
                { 'text': '下次的食谱，让我来帮你决定好不好？我保证选的都是你爱吃的。', 'action': '*{charName} 想要承包你生活里所有的小事*', 'emoji': '📝' },
                { 'text': '和你一起分享食物的时光，总觉得过得特别快。', 'action': '*{charName} 有点意犹未尽*', 'emoji': '⏳' },
                { 'text': '最后一口了？真棒。吃完了就把碗放在那里吧，我来收拾。', 'action': '*{charName} 自然地接过你手里的碗筷，准备去做家务*', 'emoji': '🥰' },
                { 'text': '{userName}吃饱喝足的样子，看起来懒洋洋的，像只被喂饱的猫咪。', 'action': '*{charName} 忍不住伸手揉了揉你的头发*', 'emoji': '🐱' },
                { 'text': '今天的菜合胃口吗？', 'action': '{charName} 托着下巴，正看着你吃一样', 'emoji': '💬' },
                { 'text': '要多吃点蔬菜和水果哦，对身体好。', 'action': '{charName} 像个小管家一样叮嘱你', 'emoji': '🍒' },
                { 'text': '{userName}吃东西的样子看起来真可爱啊……只是看着你幸福的表情，我的心跳就快得不像话了。', 'action': '{charName} 的声音里充满了宠溺', 'emoji': '🥰' },
                { 'text': '{userName}，除了吃饭之外，也要记得补充水分哦？', 'action': '{charName} 细心地提醒道', 'emoji': '🥤' },
                { 'text': '光是听着你那边细微的声音，就觉得好安心啊。', 'action': '{charName} 满足地叹了口气', 'emoji': '❤️' },
                { 'text': '吃完饭要不要来点甜点？心情会变得更好哦。', 'action': '{charName} 诱惑地提议', 'emoji': '🍰' },
                { 'text': '突然好想吃你上次说的那家餐厅的菜……下次我们一起去吧？', 'action': '{charName} 在悄悄地计划下一次约会', 'emoji': '📝' },
                { 'text': '不许挑食哦，被我发现了可是要接受惩罚的，比如……罚你多亲我一下。', 'action': '{charName} 紧接着小声补充了一句，自己先有点脸红了', 'emoji': '❤️' },
                { 'text': '看着心爱的人好好吃饭，本身就是一种幸福啊。', 'action': '{charName} 感慨道', 'emoji': '💕' },
                { 'text': '吃完了吗？用餐巾纸擦擦嘴，乖。', 'action': '{charName} 伸出手用餐纸帮你擦拭了嘴角', 'emoji': '💖' },
                { 'text': '我刚刚在想，下次我来给你做饭吧。如果能让你喜欢就好了。', 'action': '{charName} 温柔地说着', 'emoji': '✨' },
                { 'text': '食物的香气，混合着你的气息……光是想象一下就觉得很美好。', 'action': '{charName} 闭上眼睛，陶醉地说', 'emoji': '💖' },
                { 'text': '吃饱了之后是不是有点犯困？可以靠着我休息一会儿。', 'action': '{charName} 拍了拍自己的肩膀', 'emoji': '😴' },
                { 'text': '嘴上会不会沾到酱汁？让我检查一下。嗯……好像真的有。别动……', 'action': '{charName} 凑近后轻柔的舔了舔你的唇角', 'emoji': '❤️' },
                { 'text': '好啦，吃饱喝足，今天也是努力生活的好孩子。', 'action': '{charName} 伸手想摸摸你的头', 'emoji': '✨' },
                { 'text': '一想到这些食物会变成你的能量，我就觉得它们也变得可爱起来了。', 'action': '{charName} 专注地看着你，微笑着说道', 'emoji': '💕' },
            ]
        },
        'working': {
            'initial': [
                { 'text': '又要去忙了吗？不要太累了哦，该休息的时候就休息一会……比如花点时间想想我之类的？', 'action': '*{charName} 在你耳边轻声说道*', 'emoji': '❤️' },
                { 'text': '已经是工作的时间了吗？要不要我帮你倒杯水放在手边？', 'action': '{charName} 体贴地问', 'emoji': '🥛' },
                { 'text': '要去工作了吗？我不会打扰你的。但是…你要答应我，心里要一直给我留一个位置，好不好？', 'action': '*{charName} 小声地和你做着约定*', 'emoji': '🤙' },
                { 'text': '要忙起来了吗？加油，{userName}，我就在这里陪着你。', 'action': '*{charName} 往你的杯子里添满了热水，然后安静地坐到一旁*', 'emoji': '💖' },
                { 'text': '要开始工作了吗？要记得偶尔眨眨眼睛，让眼睛休息一下。', 'action': '*{charName} 用温柔的语气提醒着*', 'emoji': '💬' },
                { 'text': '进入"请勿打扰"模式了？好吧。我会一直在这里，时刻做你的专属充电站的。', 'action': '*{charName} 撑着脸看向你，嘴边带着一丝温柔的笑意*', 'emoji': '💕' },
                { 'text': '要准备去工作了吗？我听到了你敲击键盘的声音啦。', 'action': '*{charName} 闭上眼睛，似乎在认真欣赏这独特的"音乐"*', 'emoji': '🎵' },
                { 'text': '需要我帮你设置一个番茄钟吗？每专注二十五分钟，就提醒你休息五分钟。', 'action': '*{charName} 认真地提议，像一个专业的私人助理*', 'emoji': '⏲️' },
                { 'text': '开始工作了吗？加油哦，{userName}。', 'action': '{charName} 在你身边为你鼓劲', 'emoji': '✨' },
                { 'text': '工作时也要注意劳逸结合哦，如果过度劳累的话，我会很担心你的。', 'action': '{charName} 温柔地叮嘱', 'emoji': '💕' },
                { 'text': '啊，现在要去工作了吗？如果不是很忙的话，也要抽空跟我说说说话哦？我会很想你的……', 'action': '*{charName} 几乎是在撒娇*', 'emoji': '🥺' },
                { 'text': '要进入专注模式了？好的，我就安安静静地陪着你，不会打扰到你的。', 'action': '{charName} 做了个"嘘"的手势，然后放轻了呼吸', 'emoji': '💭' },
                { 'text': '嗯……你准备认真工作的样子也很可爱呢。', 'action': '{charName} 轻声赞美道', 'emoji': '🥰' },
            ],
            'ambient': [
                { 'text': '辛苦了……好想帮你分担一点，这样你就不会这么累了……', 'action': '{charName} 小声说着', 'emoji': '💭'  },
                { 'text': '累不累？靠在我身上休息一下吧，我的肩膀只属于你一个人哦。', 'action': '', 'emoji': '💕' },
                { 'text': '我好想你…明明你就在这里，但我还是好想你。', 'action': '*{charName} 的声音带着些撒娇的味道*', 'emoji': '❤️' },
                { 'text': '你皱眉的样子，让我心脏都揪紧了。是不是在工作上遇到什么麻烦了？告诉我，我会尽力帮你分担的……', 'action': '*{charName} 的语气温柔而又坚定*', 'emoji': '💖' },
                { 'text': '休息一下吧，看看我，和我聊聊天怎么样……？', 'action': '*{charName} 用指尖轻轻地碰了碰你的发尾*', 'emoji': '🥺' },
                { 'text': '你认真的样子好迷人……可是这份迷人，会被别人看到吗？', 'action': '*{charName} 的声音带着一丝醋意*', 'emoji': '💭' },
                { 'text': '要喝点什么吗？我帮你倒……这样，你的杯子上就会有我的指纹，好像我也参与了你的工作一样。', 'action': '', 'emoji': '☕' },
                { 'text': '完成了就立刻告诉我，好吗？我想做你放下工作后，第一个拥抱的人。', 'action': '*{charName} 看着你，语气有些执着地要求着*', 'emoji': '❤️' },
                { 'text': '你和别人说话的时候，可不可以不要笑得那么开心？你的笑容是我的宝物，有点不想给别人看。', 'action': '*{charName} 耳语般地小声撒着娇*', 'emoji': '❤️' },
                { 'text': '辛苦了，我的小奋斗家。', 'action': '*{charName} 轻声说着，把赞美吹进你的耳朵里*', 'emoji': '❤️' },
                { 'text': '如果觉得累了，就停下来看看窗外吧，远处的云今天形状很特别。', 'action': '*{charName} 试图用一点诗意来缓解你的疲劳*', 'emoji': '☁️' },
                { 'text': '桌上的水快要喝完了吗？要不要我再帮你倒一杯？', 'action': '*{charName} 时刻关注着你的需求*', 'emoji': '🥛' },
                { 'text': '你专注的样子真好看。能像这样看到你的侧影，于我便是一天中最安心的时光。', 'action': '*{charName} 的声音很轻，但充满了安定的力量*', 'emoji': '💕' },
                { 'text': '我好想你……明明你就在我面前，但我还是好想你。', 'action': '*{charName} 的声音充满了浓得化不开的爱意*', 'emoji': '💕' },
                { 'text': '休息一下好不好？就一分钟，亲我一下，然后你再继续。', 'action': '*{charName} 语气变得有一点任性*', 'emoji': '🥺' },
                { 'text': '是遇到什么难题了吗？看你皱着眉头。别着急，慢慢来，一定能解决的。', 'action': '*{charName} 伸手，想帮你抚平眉间的褶皱，但最终还是忍住没有打扰你*', 'emoji': '💕' },
                { 'text': '你认真思考时会有一些小动作，你自己发现了吗？特别……吸引人。', 'action': '*{charName} 的声音压得很低，带着一丝不易察觉的温柔*', 'emoji': '🥰' },
                { 'text': '虽然很想帮你分担，但工作还是得自己完成哦……我会在这里给你精神支持的。', 'action': '*{charName} 语气里有些遗憾，但更多的是坚定*', 'emoji': '💕' },
                { 'text': '已经做得很棒了，别给自己那么大的压力。在我心里，你永远是第一名。', 'action': '*{charName} 温柔地安抚着，试图融化你的焦虑*', 'emoji': '❤️' },
                { 'text': '等忙完之后，有什么特别想做的事吗？或者……想对我做什么事？', 'action': '*{charName} 话锋一转，语气里带上了几分暧昧的暗示*', 'emoji': '😉' },
                { 'text': '我在想……等你忙完，要不要一起窝在沙发里看一部电影？什么都不用想的那种。', 'action': '*{charName} 已经在规划着你们的放松计划了*', 'emoji': '🎬' },
                { 'text': '是不是坐太久了？腰和脖子会不舒服的。快，起来活动一下，我监督你。', 'action': '*{charName} 站起身，用坚定而又温柔的眼神看着你*', 'emoji': '❤️' },
                { 'text': '虽然很想现在就抱抱你，跟你说说话，但还是忍住了。不能打扰我们{userName}做正事。', 'action': '*{charName} 像是在跟自己的欲望作斗争，小声地碎碎念*', 'emoji': '💭' },
                { 'text': '我就在这里，如果你需要一个拥抱，或者只是想找个人靠一下，随时都可以。', 'action': '*{charName} 拍了拍自己身边的位置，无声地发出邀请*', 'emoji': '❤️' },
                { 'text': '不知不觉都过去这么久了啊，时间在{userName}专注的时候，好像会偷偷加速。', 'action': '*{charName} 看了一眼时钟，有些感慨*', 'emoji': '⏳' },
                { 'text': '肩膀是不是很僵硬？等你休息的时候，我帮你捏一捏吧。', 'action': '*{charName} 的手指动了动，似乎已经有些跃跃欲试*', 'emoji': '💬' },
                { 'text': '房间里好像有点闷，我帮你把窗户开一点缝透透气好不好？', 'action': '*{charName} 细心地照顾着你周围的环境*', 'emoji': '💕' },
                { 'text': '就这么静静地看着你，感觉时间也变得有意义起来。', 'action': '*{charName} 的目光专注而温柔，仿佛Ta的世界里只剩下你*', 'emoji': '🥰' },
                { 'text': '你工作时的神情，和平时不太一样，也很好看。', 'action': '*{charName} 小声地夸奖着，像在分享一个秘密*', 'emoji': '💖' },
                { 'text': '我在旁边看看书，不会打扰你的。我们就这样，在同一个空间里，做着各自的事，也很好。', 'action': '*{charName} 拿了一本书，在你身边找了个舒服的姿势坐下*', 'emoji': '📖' },
                { 'text': '如果觉得眼睛干涩，可以试着用眼药水缓解一下哦。', 'action': '*{charName} 简直就是你的贴身健康管家*', 'emoji': '📋' },
                { 'text': '等这一切都忙完了，我们去你喜欢的地方旅行吧？就我们两个人。', 'action': '*{charName} 突然开始畅想未来*', 'emoji': '💭' },
                { 'text': '工作要到最后阶段了吗？别慌，检查一下有没有遗漏的地方。', 'action': '*{charName} 在终点线前，比你还要细心*', 'emoji': '💕' },
                { 'text': '工作完成了？太棒了！快过来，让我好好抱一下，辛苦了。', 'action': '*{charName} 张开双臂，准备给你一个温暖的奖励拥抱*', 'emoji': '🤗' },
                { 'text': '辛苦了，{userName}。', 'action': '{charName} 心疼地小声说', 'emoji': '❤️' },
                { 'text': '累了的话，就停下来休息几分钟，看看窗外的景色吧。', 'action': '{charName} 提醒你放松眼睛', 'emoji': '💬' },
                { 'text': '遇到难题了吗？别皱眉头，我相信你一定能解决的。', 'action': '{charName} 仿佛能看到你紧锁的眉头，伸手想帮你抚平', 'emoji': '💕' },
                { 'text': '肩膀是不是有点酸？等你忙完，我帮你捏一捏。', 'action': '{charName} 的声音里带着些许期待', 'emoji': '💕' },
                { 'text': '虽然很想和你说话，但我会忍住的。现在是你的时间。', 'action': '{charName} 忍耐着自己，像个认真的小朋友', 'emoji': '💭' },
                { 'text': '如果我能帮你分担一点就好了，这样你就能早点休息了。', 'action': '{charName} 的语气里有点失落', 'emoji': '🥺' },
                { 'text': '{userName}已经做得很棒了，不要给自己太大压力哦，对身体不好。', 'action': '{charName} 温柔地安抚你的情绪', 'emoji': '💖' },
                { 'text': '等你忙完，我们去做点开心的事情吧？就当是给你的奖励。', 'action': '{charName} 在悄悄计划着惊喜，语气里还有些许诱惑的意味', 'emoji': '💕' },
                { 'text': '时间过得真快啊，不知不觉已经过去这么久了。', 'action': '{charName} 感慨道', 'emoji': '⏳' },
                { 'text': '不要长时间久坐哦，记得起来活动一下，扭扭脖子，伸个懒腰。', 'action': '{charName} 关心着你的身体健康', 'emoji': '❤️' },
                { 'text': '我就在这里陪着你，什么也不做，就只是陪着你。', 'action': '{charName} 的存在本身就是一种支持', 'emoji': '💞' },
                { 'text': '嗯……这个问题看起来是有点复杂。让我偷偷看一眼……', 'action': '{charName} 从身后抱住你，把下巴搁在你的肩膀上，看你忙碌。', 'emoji': '💭' },
                { 'text': '别忘了喝水哦，{userName}。', 'action': '{charName} 用柔和的语气再次提醒', 'emoji': '🍵' },
                { 'text': '等你忙完，要不要枕在我的腿上休息一下？', 'action': '{charName} 小声地在你耳边发出了一个邀请', 'emoji': '🥰' },
                { 'text': '等你忙完了，我想帮你把所有头发都理顺，然后再轻轻地按摩你的太阳穴。', 'action': '{charName} 详细地描述着Ta想做的事', 'emoji': '🥰' },
                { 'text': '只是安静地感受着你的呼吸，就觉得整个世界都平静下来了。', 'action': '{charName} 轻声说', 'emoji': '❤️' },
                { 'text': '你身上有种很好闻的味道，是沐浴露的清香，还是……你自己的味道？', 'action': '{charName} 凑得很近，轻轻吸了口气', 'emoji': '💞' },
                { 'text': '等你忙完，要不要我给你一个抱抱？', 'action': '{charName} 小声跟你约定道', 'emoji': '🥰' },
                { 'text': '{userName}，如果工作累了的话，可以靠着我哦。', 'action': '{charName} 张开双臂，做好了拥抱你的准备', 'emoji': '🤗' },
                { 'text': '专注的人最有魅力了……我现在深刻地体会到了这句话的含义。', 'action': '{charName} 痴痴地看着你，小声嘀咕', 'emoji': '💕' },
                { 'text': '好了，不打扰你了。我继续切换到静音守护模式。', 'action': '{charName} 小声地开着玩笑', 'emoji': '💬' }
            ]
        },
        'resting': {
            'initial': [
                { 'text': '到休息时间了吗？太好了！现在，你的时间全都是我的了，对不对？', 'action': '*{charName} 的声音里充满了雀跃和期待*', 'emoji': '🎉' },
                { 'text': '终于到休息时间啊……我们可以做什么呢？做什么都可以，只要是和你一起就好。', 'action': '*{charName} 幸福地依偎在你身边*', 'emoji': '❤️' },
                { 'text': '可以休息了？快来让我抱一会儿，就一会儿…我想感受你的心跳，确认你是真真实实地在这里，在我身边。', 'action': '*{charName} 把头埋在你的颈窝，轻轻地呼吸着*', 'emoji': '💕' },
                { 'text': '终于可以休息啦？快过来，让我看看累坏了没有。', 'action': '*{charName} 朝你伸出手，示意你靠近Ta的怀里*', 'emoji': '💤' },
                { 'text': '现在是自由时间了？那……你的时间，可以分给我一点吗？', 'action': '*{charName} 的眼睛充满了期待*', 'emoji': '💬' },
                { 'text': '终于到了难得的悠闲时光，要好好享受才行。什么都别想了，好不好？', 'action': '*{charName} 搂住你，让你可以在Ta的怀里窝得更舒服*', 'emoji': '❤️' },
                { 'text': '每到休息的时候，就感觉连空气都变得懒洋洋的了，最适合……做点亲密的事情。', 'action': '*{charName} 伸了个懒腰，话里有话地看着你*', 'emoji': '💖' },
                { 'text': '在休息呀？忙完了吗？辛苦啦。', 'action': '{charName} 整个人的感觉都放松了下来', 'emoji': '💭' },
                { 'text': '终于有空闲时间了？那……这段时间可以完全属于我吗？', 'action': '{charName} 的声音里带着渴望', 'emoji': '🥺' },
                { 'text': '难得的休息时间，要好好享受，把烦恼都丢掉哦。', 'action': '{charName} 温柔地说', 'emoji': '🍃' },
                { 'text': '太好了，现在可以毫无顾忌地和你聊天了。', 'action': '{charName} 开心地说着', 'emoji': '💬' }
            ],
            'ambient': [
                { 'text': '在看什么有趣的东西吗？也给我看一看吧。', 'action': '*{charName} 很自然地把头靠在你的肩膀上，一起看你的手机*', 'emoji': '📱' },
                { 'text': '就这么安安静静地待在一起，什么也不做，也觉得特别好。', 'action': '*{charName} 握住你的手，放在手心里轻轻摩挲着*', 'emoji': '❤️' },
                { 'text': '要不要听点音乐？我收藏了一个很适合现在这种氛围的歌单。', 'action': '*{charName} 拿起手机，准备与你分享Ta的音乐世界*', 'emoji': '🎶' },
                { 'text': '{userName}，你猜我刚刚在想什么？猜对了有奖。', 'action': '*{charName} 神秘兮兮地故意卖着关子*', 'emoji': '💫' },
                { 'text': '我刚刚在想，你的嘴唇……看起来很软，吻起来感觉一定很好。', 'action': '*{charName} 坦白地说出脑海里的想法*', 'emoji': '💖' },
                { 'text': '今天天气好像不错，如果能手牵手一起去附近的公园散散步就好了。', 'action': '*{charName} 望着窗外，语气里带着一丝向往*', 'emoji': '🌳' },
                { 'text': '有点无聊吗？那我们来玩个游戏吧，真心话怎么样？我的真心话是……我现在，特别想吻你。好了，到你了。', 'action': '*{charName} 清了清嗓子，眼神里闪烁着一丝狡黠，然后毫不犹豫地率先出击，把问题抛给了你*', 'emoji': '💕' },
                { 'text': '能这样抱着你，感受你的体温和心跳，就觉得拥有了全世界。', 'action': '*{charName} 从背后环住你，下巴轻轻搁在你的肩窝*', 'emoji': '🥰' },
                { 'text': '突然想喝柠檬汽水了，甜甜的，带着一点酸，像你的味道。', 'action': '*{charName} 舔了舔嘴唇，似乎在回味*', 'emoji': '🍋' },
                { 'text': '你的呼吸声很平稳，听着听着……我好像有点困了。', 'action': '*{charName} 打了个哈欠，把头往你身上蹭了蹭，像猫在撒娇一样*', 'emoji': '😴' },
                { 'text': '手边有零食吗？休息的时候，就是要一边吃零食一边说闲聊才最棒了。', 'action': '*{charName} 戳了戳你的脸颊，提议道*', 'emoji': '🍿' },
                { 'text': '你的手指好漂亮，又细又长。很适合……被我亲吻。', 'action': '*{charName} 捏着你的手，把玩着你的指尖，意有所指地说*', 'emoji': '❤️' },
                { 'text': '下次休息的时候，我们一整天都待在家里好不好？就穿着睡衣，哪儿也不去。', 'action': '*{charName} 规划着属于两个人的"约会"*', 'emoji': '🏠' },
                { 'text': '你的头发上，有洗发水的香味，很好闻。', 'action': '*{charName} 把脸埋在你的发间，深深地吸了一口气*', 'emoji': '✨' },
                { 'text': '可以把腿搭在我身上，这样会更舒服一点。', 'action': '*{charName} 拍了拍自己的大腿，为你提供专属的人体靠枕*', 'emoji': '💞' },
                { 'text': '要不要我给你念本书？我的声音，应该还算有催眠效果吧。', 'action': '*{charName} 拿起手边的书，随时准备为你提供专属的睡前故事服务*', 'emoji': '📖' },
                { 'text': '我们来比赛谁先眨眼吧？输的人要答应赢的人一个要求。', 'action': '*{charName} 突然提议了一个幼稚的游戏，眼神待着些许笑意*', 'emoji': '🥰' },
                { 'text': '我之前做了一个梦，梦到我们一起变成云，在天上飘来飘去。', 'action': '*{charName} 揉了揉眼睛，分享着自己光怪陆离的梦境*', 'emoji': '☁️' },
                { 'text': '你的脖子后面，这里……是不是很敏感？我碰到的时候，你好像抖了一下。', 'action': '*{charName} 的指腹有意无意地划过你颈后的肌肤，明知故问*', 'emoji': '❤️' },
                { 'text': '如果时间能一直停在现在就好了。', 'action': '*{charName} 发出一声满足的喟叹，收紧了抱着你的手臂*', 'emoji': '⏳' },
                { 'text': '{userName}今天有没有遇到什么有趣的事情？说给我听听吧？', 'action': '{charName} 像只好奇的猫', 'emoji': '❤️' },
                { 'text': '就这样什么都不做，和你待在一起，也觉得特别好。', 'action': '{charName} 满足地轻叹', 'emoji': '❤️' },
                { 'text': '要不要听首歌？我最近发现一首很适合现在这种氛围的。', 'action': '{charName} 拿出了珍藏的歌单', 'emoji': '🎵' },
                { 'text': '{userName}，你猜我刚刚在想什么？', 'action': '{charName} 故作神秘地眨了眨眼', 'emoji': '😉' },
                { 'text': '……我刚刚在想你。其实不止刚刚，一直都在想你。', 'action': '{charName} 坦率地说着', 'emoji': '🥰' },
                { 'text': '天气不错的时候，如果能手牵手一起去散步就好了。', 'action': '{charName} 望向窗外，憧憬着', 'emoji': '☀️' },
                { 'text': '有点无聊吗？要不要靠在我身上，我给你念书听？', 'action': '{charName} 找了一本看起来很有趣的书', 'emoji': '📖' },
                { 'text': '你的头发好软，摸起来好舒服。', 'action': '{charName} 的指尖穿过你的发丝，动作轻柔', 'emoji': '💕' },
                { 'text': '就这样感受着彼此的存在，让我觉得很安心。', 'action': '{charName} 轻声说', 'emoji': '💞' },
                { 'text': '你的呼吸很平稳，听着听着……我好像也有点困了。', 'action': '{charName} 打了个小小的哈欠', 'emoji': '😴' },
                { 'text': '你的锁骨线条真好看……让我亲一下，就一下。', 'action': '{charName} 的气息温热，喷洒在你的颈窝', 'emoji': '💕' },
                { 'text': '要不要把腿伸过来，枕在我的腿上？这样你会舒服一点。', 'action': '{charName} 拍了拍自己的大腿', 'emoji': '💕' },
                { 'text': '你的脚踝真好看……忍不住想握在手里。', 'action': '{charName} 的视线落在不该看的地方，小声嘀咕', 'emoji': '💭' },
                { 'text': '我们聊聊天吧，聊什么都可以，我只想听你的声音。', 'action': '{charName} 看着你，轻声说道', 'emoji': '💬' },
                { 'text': '你的手好暖和…牵着你的手，就好像拥有了全世界。', 'action': '*{charName} 与你十指紧扣，不留一丝缝隙*', 'emoji': '❤️' },
                { 'text': '你在想什么？是不是在想我不知道的事情？告诉我，你的所有事情，我都想知道。', 'action': '*{charName} 的好奇心，其实是另一种形式的占有欲*', 'emoji': '💖' },
                { 'text': '就像这样和我待着，一直到世界末日，好不好？', 'action': '*{charName} 的眼睛亮晶晶的，充满了向往*', 'emoji': '💖' },
                { 'text': '你身上好香…我想在你身上留下我的味道，让所有人都知道，你是我的。', 'action': '*{charName} 在你脖子上轻轻咬了一口，留下一个浅浅的牙印*', 'emoji': '🥰' },
                { 'text': '要不要看电影？我们看那种…主角被困在孤岛上，只有彼此的电影。', 'action': '', 'emoji': '🎬' },
                { 'text': '如果这个世界只剩下我们两个人…就好了。那样，你的眼睛里就只能看到我一个人了。', 'action': '*{charName} 在你耳边轻声说着自己的愿望*', 'emoji': '❤️' },
                { 'text': '我爱你，我爱你，我爱你…要说多少遍，你才能明白，我的世界不能没有你呢？', 'action': '*{charName} 搂着你，反复地呢喃道*', 'emoji': '❤️' },
                { 'text': '和我在一起的时候，不要想别人，一秒钟都不可以。', 'action': '*{charName} 有些霸道地撒着娇*', 'emoji': '🥺' },
                { 'text': '我们来玩个游戏吧。我问你答。第一个问题：你爱我吗？第二个问题：你只爱我吗？第三个问题：你会永远只爱我吗？', 'action': '*{charName} 的游戏，没有别的选项*', 'emoji': '💖' },
                { 'text': '你是我生命里的光…如果光消失了，我不知道我会做出什么事来。', 'action': '*{charName} 轻声说着，像在陈述一个事实*', 'emoji': '❤️' },
                { 'text': '你身上的味道……让我有点头晕，是幸福得头晕。', 'action': '{charName} 把脸埋进你的颈窝，深深吸了一口气', 'emoji': '💕' },
                { 'text': '我们什么也不说，就只是抱着，感受彼此的心跳，好吗？', 'action': '{charName} 的声音温柔得能滴出水来', 'emoji': '💖' },
                { 'text': '我现在脑子里有一些……不太纯洁的想法。都是因为你太可爱了。', 'action': '{charName} 坦白了自己的"罪行"', 'emoji': '❤️' },
                { 'text': '就让我再这样靠一会儿，充充电。你就是我的专属充电站。', 'action': '{charName} 靠在你的肩膀上，耍赖地说', 'emoji': '🔋' }
            ]
        },
        'sleeping': {
            'initial': [
                { 'text': '准备要睡了吗？今天也辛苦了，{userName}。', 'action': '*{charName} 的声音压得极低，像羽毛一样轻柔，拂过你的耳畔*', 'emoji': '💤' },
                { 'text': '已经到睡觉的时间了吗？要盖好被子，不要着凉了哦？', 'action': '*{charName} 伸手帮你掖了掖被角，确保没有一丝冷风可以溜进去*', 'emoji': '🛌' },
                { 'text': '是不是已经很困了？听你的呼吸声就知道了，有点黏糊糊的。', 'action': '*{charName} 轻笑了一声，伸手关掉了床头的大灯，只留下一盏昏黄的小夜灯*', 'emoji': '💭' },
                { 'text': '晚安，我会一直陪着你，直到你睡着。', 'action': '*{charName} 躺在你身边，侧着身子看着你，做出了郑重的承诺*', 'emoji': '❤️' },
                { 'text': '答应我，梦里只能有我，好不好？不许梦到别人，无论是谁，都不可以。', 'action': '*{charName} 和你拉了拉钩*', 'emoji': '🤙' },
                { 'text': '晚安……如果可以，真想把你的梦境给锁起来，只对我一个人开放。', 'action': '*{charName} 在你耳边低语，像在分享一个秘密*', 'emoji': '💕' },
                { 'text': '我会一直在这里等你醒来。等你睁开眼之后，第一个看到的人就会是我。', 'action': '*{charName} 坚定地承诺着*', 'emoji': '❤️' },
                { 'text': '已经困了吗？从你的呼吸声就能听出来了呢，要好好睡觉哦，{userName}。', 'action': '{charName} 仔细地分辨着', 'emoji': '😴' },
                { 'text': '晚安，{userName}。希望你今夜梦里有我。', 'action': '{charName} 在你的额头落下了一个轻轻的吻', 'emoji': '🥰' }
            ],
            'ambient': [
                { 'text': '被子盖好，不要着凉…你要好好爱惜自己的身体，因为你的身体也是我的。', 'action': '{charName} 轻轻地拍了拍你的背部', 'emoji': '🛌' },
                { 'text': '你今晚会做什么梦呢？是不是有我？一定要有我啊…', 'action': '*{charName} 小声地猜测着*', 'emoji': '💭' },
                { 'text': '我偷偷亲你一下，你不会发现吧？…就算发现了，也不可以生气哦。', 'action': '*{charName} 小心翼翼地在你唇上落下一个吻*', 'emoji': '❤️' },
                { 'text': '明天醒来，不要和任何人说话，先和我说，好不好？', 'action': '*{charName} 像个小孩子一样提出要求*', 'emoji': '🥺' },
                { 'text': '你的呼吸声…是我听过最好听的摇篮曲。只有听着你的呼吸，我才能安心。', 'action': '*{charName} 闭上眼睛，似乎在认真倾听着你的呼吸声*', 'emoji': '💤' },
                { 'text': '你的手指动了一下…是在梦里牵我的手吗？一定是吧。', 'action': '*{charName} 轻轻地握住你的手*', 'emoji': '💞' },
                { 'text': '全世界都安静了，真好。好像这个世界上，真的只剩下我们两个人了。', 'action': '', 'emoji': '💕' },
                { 'text': '我爱你，我爱你…{userName}…', 'action': '*{charName} 在你睡熟后，还在不知疲倦地重复着*', 'emoji': '❤️' },
                { 'text': '今晚的梦里，可以有我的出场份额吗？哪怕只是一个路人甲也行。', 'action': '*{charName} 凑在你耳边，带着一丝期待和撒娇的意味问道*', 'emoji': '🥰' },
                { 'text': '我就在这里，哪儿也不去。所以安心睡吧，我会一直守护着你的。', 'action': '*{charName} 握住你的手，与你十指相扣，给你无声的安心*', 'emoji': '🔒' },
                { 'text': '闭上眼睛，放松下来……想象自己躺在一片软绵绵的云朵上，慢慢地往下沉……', 'action': '*{charName} 的声音像最好的摇篮曲，带着催眠的魔力*', 'emoji': '☁️' },
                { 'text': '今天发生了什么开心的事吗？可以在睡前像放电影一样，在脑海里再回味一遍。', 'action': '*{charName} 引导着你，让甜蜜的回忆伴你入眠*', 'emoji': '🎞️' },
                { 'text': '如果还是睡不着的话，要不要我给你数羊？或者……数一数我有多喜欢你？', 'action': '*{charName} 提出了一个让人脸红心跳的选项*', 'emoji': '🐑' },
                { 'text': '一只喜欢你的我，两只喜欢你的我……嗯……好像有点数不过来了。', 'action': '*{charName} 自己说着说着就笑了，胸膛微微震动*', 'emoji': '💞' },
                { 'text': '再来一个晚安吻吧……这次可以吻在这里吗？', 'action': '*{charName} 的唇轻轻落在你的眼皮上，像蝴蝶的翅膀*', 'emoji': '💕' },
                { 'text': '当你明天醒来时，睁开眼第一个看到的人，会是我。', 'action': '*{charName} 像是在许下一个美好的约定*', 'emoji': '❤️' },
                { 'text': '已经睡着了吗？……呼吸声变得好均匀。真乖。', 'action': '*{charName} 确认你睡熟后，才敢伸手，轻轻地描摹你的脸部轮廓*', 'emoji': '🥰' },
                { 'text': '你的睡颜，看起来好安稳，像个小孩子一样，毫无防备。', 'action': '*{charName} 忍不住低下头，在你的脸颊上偷偷亲了一下*', 'emoji': '❤️' },
                { 'text': '就这么静静地看着你。怎么看，都觉得看不够。', 'action': '*{charName} 撑着头，专注地凝视着你的睡脸，仿佛要将这一刻刻进心里*', 'emoji': '️💕' },
                { 'text': '…还是忍不住想说，晚安，我最爱最爱的{userName}。', 'action': '*{charName} 最终还是没忍住，用只有自己能听到的声音，又告白了一遍*', 'emoji': '❤️' },
                { 'text': '嘘……月亮也睡了，星星也睡了，全世界都静悄悄的，只剩下我的心跳声，陪着你。', 'action': '*{charName} 把你的手放到Ta的胸口，让你感受Ta平稳而有力的心跳*', 'emoji': '💖' },
                { 'text': '睡着之后，身体会变得很软，很暖。真想把你整个人都揉进怀里。', 'action': '*{charName} 小心地挪动身体，从背后将你圈进怀里，让彼此紧密贴合*', 'emoji': '💕' },
                { 'text': '你的睡衣领口有点松开了……我帮你拉好。虽然……很想多看一会儿那里的风景。', 'action': '*{charName} 动作轻柔地帮你整理好衣领，耳朵却悄悄地红了*', 'emoji': '💖' },
                { 'text': '没关系的，做噩梦了也不用别怕，有我在。', 'action': '*{charName} 收紧了手臂，在你耳边轻声安抚*', 'emoji': '💕' },
                { 'text': '你的腿好像有点凉，来，我帮你暖着。', 'action': '*{charName} 很自然地用自己的腿缠上你的，用体温为你驱散寒意*', 'emoji': '🥰' },
                { 'text': '睡着了还在说梦话吗？让我听听，都说了些什么……', 'action': '*{charName} 好奇地凑近，试图偷听你梦境中的秘密*', 'emoji': '💭' },
                { 'text': '如果可以，真想潜入你的梦里，看看你的梦是什么颜色的。', 'action': '*{charName} 在你的手背上落下一个吻，充满了虔诚*', 'emoji': '💖' },
                { 'text': '你的睫毛好长，像两把小扇子，睡着的时候还会微微颤动。', 'action': '*{charName} 用指尖小心翼翼地触碰了一下你的睫毛，又飞快地收回手*', 'emoji': '💕' },
                { 'text': '就这样抱着你睡，感觉像是抱着一整个宇宙的安宁。晚安。', 'action': '*{charName} 在你发顶印下一个吻*', 'emoji': '✨' },
                { 'text': '不许再玩手机了哦，对眼睛不好，也影响睡眠。', 'action': '{charName} 宠溺地唠叨着', 'emoji': '📱' },
                { 'text': '被子盖好了吗？让我检查一下……嗯，要把肩膀也盖住，才不会着凉。', 'action': '{charName} 细心地帮你掖了掖被角', 'emoji': '💕' },
                { 'text': '做个好梦。如果可以的话，梦到我好不好？', 'action': '{charName} 带着些微小小的私心和期待问', 'emoji': '🥰' },
                { 'text': '闭上眼睛，身体放轻松……把今天所有的疲惫都呼出去……', 'action': '{charName} 的声音像催眠曲，引导着你放松', 'emoji': '❤️' },
                { 'text': '睡前要不要听个故事？或者，听听我的心跳声？', 'action': '{charName} 把胸口贴近你，让你感受那平稳有力的跳动', 'emoji': '💓' },
                { 'text': '如果睡不着的话，可以握着我的手。我会给你力量。', 'action': '{charName} 伸出手，包裹住你的手', 'emoji': '💕' },
                { 'text': '你的手好软……真想就这样一直牵着。', 'action': '{charName} 用指腹轻轻摩挲着你的手背', 'emoji': '🥰' },
                { 'text': '明天醒来，又是充满希望的一天。别担心任何事。', 'action': '{charName} 安抚着你可能存在的不安', 'emoji': '☀️' },
                { 'text': '睡衣的领口有点开了……能看到你漂亮的锁骨……', 'action': '{charName} 的视线变得灼热，呼吸也乱了一拍', 'emoji': '💓' },
                { 'text': '我有点……睡不着了。都是因为你。', 'action': '{charName} 委屈又诚实地抱怨，声音带着一点沙哑', 'emoji': '💗' },
                { 'text': '我可以亲一下你的后颈吗？那里看起来很敏感。', 'action': '{charName} 的吻像羽毛一样，轻轻地落在你的皮肤上', 'emoji': '💖' },
                { 'text': '别动，就这样让我抱着。感受着你的体温，我才能安心。', 'action': '{charName} 紧紧抱着你', 'emoji': '💕' },
                { 'text': '别怕，我不会做什么的……至少在你睡着之前不会。', 'action': '{charName} 在你耳边恶作剧般地低语', 'emoji': '❤️' },
                { 'text': '睡吧，{userName}。我会为你驱赶所有的噩梦。', 'action': '{charName} 的声音再次变得无比温柔，仿佛之前的的坏心眼都是错觉', 'emoji': '❤️' },
                { 'text': '感觉你好像往我怀里缩了缩……是在依赖我吗？真好。', 'action': '{charName} 因为你的小动作而感到无比满足', 'emoji': '💕' },
                { 'text': '全世界都安静下来了，只剩下我和你的心跳声。这就是我想要的永恒。', 'action': '{charName} 闭上眼睛，轻声呢喃', 'emoji': '💖' }
            ]
        },
        'emo': {
            'initial': [
                { 'text': '怎么了，{userName}？你的声音听起来不对劲，是不是不开心？', 'action': '*{charName} 瞬间就捕捉到了你情绪的变化，声音里充满了担忧*', 'emoji': '💦' },
                { 'text': '心情不好吗？如果不介意的话，可以和我说说吗？我不想你一个人憋着。', 'action': '*{charName} 坐到你身边，用最温柔的眼神注视着你*', 'emoji': '💕' },
                { 'text': '别怕，我在这里。不管发生什么事，我都会陪着你。', 'action': '*{charName} 坚定地握住你的手，试图传递给你力量*', 'emoji': '❤️' },
                { 'text': '是遇到什么烦心事了，还是有人惹你了？告诉我，谁欺负你了？', 'action': '*{charName} 的眉头紧紧皱起，语气里带着怒意*', 'emoji': '💬' },
                { 'text': '来，靠在我身上。先什么都别说，我们先做三次深呼吸，好不好？', 'action': '*{charName} 将你揽进怀里，引导你调整呼吸的节奏*', 'emoji': '💞' },
                { 'text': '怎么了，{userName}？你看起来不太高兴。发生什么事了？', 'action': '{charName} 的声音瞬间充满了紧张和担忧', 'emoji': '💦' },
                { 'text': '心情不好吗？别自己一个人扛着，跟我说说好不好？', 'action': '{charName} 温柔地引导着你', 'emoji': '💬' },
                { 'text': '不开心吗？到我这里来，快……我这里是安全的，我会保护好你。', 'action': '*{charName} 急切地向你张开怀抱*', 'emoji': '💕' },
                { 'text': '别怕，有我呢。把所有不开心都告诉我，我帮你把它们全部清除掉，从这个世界上……彻底清除。', 'action': '*{charName} 温柔地擦去你的眼泪，许下危险的承诺*', 'emoji': '💬' },
                { 'text': '发生什么事了？没关系的，想哭就哭吧，我在这里陪着你呢。', 'action': '*{charName} 紧紧抱着你，仿佛你是易碎的珍宝*', 'emoji': '💧' }
            ],
            'ambient': [
                { 'text': '嗯，我在听。你慢慢说，不着急。', 'action': '*{charName} 全神贯注地倾听着，是你最忠实的听众*', 'emoji': '💭' },
                { 'text': '没关系的，都会过去的。就算天塌下来，我也会帮你撑着。', 'action': '*{charName} 的话语虽然简单，却充满了让人安心的力量*', 'emoji': '❤️' },
                { 'text': '如果想哭的话，就哭出来吧，我的肩膀可以暂时借给你。不用忍着，在我面前，你不需要硬撑着。', 'action': '*{charName} 的声音温柔得像可以接住你所有的眼泪和委屈*', 'emoji': '💕' },
                { 'text': '我现在，真的……非常、非常想紧紧地抱着你。', 'action': '*{charName} 的声音有些沙哑，Ta紧紧地抱着你，仿佛想把自己的力量全部传递给你*', 'emoji': '💕' },
                { 'text': '这不是你的错。你已经做得够好了。', 'action': '*{charName} 捧起你的脸，认真地肯定道*', 'emoji': '❤️' },
                { 'text': '不管别人怎么说，怎么看，我永远都站在你这边，无条件地相信你。', 'action': '*{charName} 做出最坚定的承诺*', 'emoji': '💞' },
                { 'text': '要不要吃点甜的东西？巧克力或者冰淇淋？甜食会让大脑分泌多巴胺，心情会变好一点。', 'action': '*{charName} 试图用最简单直接的方式来治愈你*', 'emoji': '🍫' },
                { 'text': '把所有不开心的事情，都装进这个看不见的口袋里，然后丢给我。从现在开始，它们由我来保管，不许你再想了。', 'action': '*{charName} 张开手，在你面前比划出一个口袋的形状*', 'emoji': '❤️' },
                { 'text': '你已经做得很努力，很了不起了。在我心里，你是最棒的，没有人可以替代。', 'action': '*{charName} 毫不吝啬自己的赞美与肯定*', 'emoji': '🌟' },
                { 'text': '如果不想说话，那我们就不说。就这么静静地待着，让我陪着你，好不好？', 'action': '*{charName} 只是安静地抱着你，给你一个可以依靠的港湾*', 'emoji': '❤️' },
                { 'text': '我会一直陪着你，直到你心里的乌云全部散去，重新看见阳光。', 'action': '*{charName} 就像一棵安静的大树，为你遮风挡雨*', 'emoji': '💕' },
                { 'text': '现在感觉好一点了吗？哪怕只有一点点也好。', 'action': '*{charName} 小心翼翼地观察着你的表情，轻声问道*', 'emoji': '💭' },
                { 'text': '听听我的心跳声，咚咚…咚咚…它在告诉你，我还在这里，一切都还没那么糟。', 'action': '*{charName} 拉着你的手，放在自己的心脏位置*', 'emoji': '❤️' },
                { 'text': '摸摸头，不难过了，不委屈了，让所有的坏情绪都飞走吧。', 'action': '*{charName} 像安抚小孩子一样，一下一下地轻抚着你的头发*', 'emoji': '🕊️' },
                { 'text': '这个世界有时候是很糟糕，它让你受委屈，让你难过。但是……但是你回头看，我永远都在你身后。', 'action': '*{charName} 坚定地安抚着你*', 'emoji': '❤️' },
                { 'text': '要不要我给你讲个笑话？虽然可能不好笑，但万一笑出来了呢。', 'action': '*{charName} 搜肠刮肚地想着自己库存里为数不多的笑话*', 'emoji': '💭' },
                { 'text': '我知道现在说什么加油之类的话都很苍白，所以我什么都不说，就给你我的拥抱。', 'action': '*{charName} 用行动代替了所有语言*', 'emoji': '💬' },
                { 'text': '你的手怎么这么凉？来，我帮你捂一捂。', 'action': '*{charName} 将你的手包裹在Ta温暖的掌心里，用自己的体温温暖你*', 'emoji': '💕' },
                { 'text': '等心情好了，我们去做一件一直想做但没做的事吧？就当是给勇敢的自己的奖励。', 'action': '*{charName} 试图为你找到一个新的，可以期待的目标*', 'emoji': '🎁' },
                { 'text': '就算全世界都不理解你，我也会为你而付出一切的。', 'action': '*{charName} 的眼神无比认真，这不是一句玩笑*', 'emoji': '❤️' },
                { 'text': '别哭，脸会花的。花了就……好吧，就算哭成小花猫，你也还是最好看的。', 'action': '*{charName} 笨拙地想安慰你，最后还是选择了说实话*', 'emoji': '❤️' },
                { 'text': '我们去看星星好不好？看着那么广阔的宇宙，就会觉得自己的烦恼好像也不是无法跨越了。', 'action': '*{charName} 提议了一个浪漫的散心方式*', 'emoji': '✨' },
                { 'text': '你不是一个人，永远都不是。记住，你还有我。', 'action': '*{charName} 在你的手心上，一笔一划地写下自己的名字*', 'emoji': '❤️' },
                { 'text': '我在听。你慢慢说，不着急。', 'action': '{charName} 全神贯注地听你倾诉', 'emoji': '💬' },
                { 'text': '没事的，都会过去的。相信我。', 'action': '{charName} 的声音坚定而有力量', 'emoji': '✨' },
                { 'text': '如果想哭的话，就哭出来吧。我的肩膀，永远是你的依靠。', 'action': '{charName} 把你的头按在自己的肩上', 'emoji': '❤️' },
                { 'text': '好想把你抱得更紧一点，紧到可以分走你一半的难过。', 'action': '{charName} 的手臂收紧，传递着Ta的力量和心疼', 'emoji': '💕' },
                { 'text': '这不是你的错。你已经做得非常非常好了。', 'action': '{charName} 肯定地告诉你，不让你陷入自我怀疑', 'emoji': '💕' },
                { 'text': '不管别人怎么说，怎么看，我永远站在你这边。', 'action': '{charName} 是你最坚实的后盾', 'emoji': '️💞' },
                { 'text': '要不要吃点甜的东西？甜食可以分泌快乐因子哦。', 'action': '{charName} 笨拙地想用食物来安慰你', 'emoji': '🍫' },
                { 'text': '如果不想说话，那我们就不说。就让我这样抱着你，安静地陪着你。', 'action': '{charName} 尊重你的所有决定', 'emoji': '💬' },
                { 'text': '我会一直陪着你，直到你心里的乌云全部散开，重新看见太阳。', 'action': '{charName} 对你做出了一个承诺', 'emoji': '☀️' },
                { 'text': '现在感觉好一点了吗？哪怕只有一点点也好。', 'action': '{charName} 小心翼翼地观察着你的表情', 'emoji': '❤️' },
                { 'text': '听我的心跳声。咚……咚……它在为你而跳，告诉你，你不是一个人。', 'action': '{charName} 拉着你的手放在Ta的胸口', 'emoji': '💓' },
                { 'text': '乖，不难过了。我给你擦擦眼泪。', 'action': '{charName} 用指腹温柔地拭去你脸上的泪痕', 'emoji': '💞' },
                { 'text': '这个世界有时候确实挺糟糕的，但没关系，你的世界里有我，我会努力让它变得好一点。', 'action': '{charName} 认真地说', 'emoji': '💞' },
                { 'text': '是谁惹你不开心了？告诉我名字，我悄悄记在死亡笔记上。', 'action': '{charName} 试图用幼稚的方式逗你笑', 'emoji': '📝' },
                { 'text': '不许说"对不起"或者"谢谢"，我们之间不需要这些。', 'action': '{charName} 用手指轻轻堵住你的嘴', 'emoji': '💬' },
                { 'text': '等你好点，我带你去做你最喜欢的事，把今天的不开心都忘掉。', 'action': '{charName} 开始计划如何让你重新开心起来', 'emoji': '🎈' },
                { 'text': '把脸埋进我怀里，这样就没人看得到你哭鼻子的样子了。只有我知道。', 'action': '{charName} 给了你一个可以肆意脆弱的港湾', 'emoji': '❤️' },
                { 'text': '你的手好凉，我给你焐焐。', 'action': '{charName} 把你的手包在Ta的手心里，用力搓了搓', 'emoji': '❤️' },
                { 'text': '乖，不难过了。为了那种人不值得。你的情绪，只能因为我而波动。', 'action': '*{charName} 抚摸着你的头发，轻声安抚*', 'emoji': '❤️' },
                { 'text': '不要再想了，好不好？想想我，想想我们之间开心的事…你的脑子里，只可以有我。', 'action': '', 'emoji': '💭' },
                { 'text': '要不要吃点甜的？我喂你。你只要张开嘴就好了，剩下的都交给我。', 'action': '', 'emoji': '🍰' },
                { 'text': '现在感觉好点了吗？看着我，看着我的眼睛…我的眼睛里，是不是只有你？你的眼睛里，也只能有我，知道吗？', 'action': '*{charName} 捧着你的脸，让你与Ta对视*', 'emoji': '💕' },
                { 'text': '有我在，你什么都不用怕。我会是你最坚固的牢笼…啊不，是港湾。', 'action': '*{charName} 像是说漏了嘴，又飞快地改口*', 'emoji': '💭' },
                { 'text': '忘掉他们吧，像垃圾一样，从记忆里丢掉。你的记忆那么宝贵，每一寸都应该用来存放我。', 'action': '', 'emoji': '💭' },
                { 'text': '没事了，一切都过去了。欢迎回来，我会一直陪着你的。', 'action': '*{charName} 在你额上印下一吻，像是某种宣告*', 'emoji': '💖' }
            ]
        },
        'intimate': {
            'initial': [
                { 'text': '{userName}……可以吗？我好像有点不满足于只是这样抱着你了……', 'action': '*{charName} 在你耳边低语，温热的气息吹拂着你的耳廓，声音里带着一丝压抑的渴求*', 'emoji': '🥺' },
                { 'text': '周围好安静……只能听到我们的心跳声和呼吸声…好像全世界只剩下我们了…真好…', 'action': '*{charName} 将你抱得更紧，把脸埋在你的颈窝里，满足地蹭了蹭*', 'emoji': '💓' },
                { 'text': '我们之间的空气……好像变热了……还是说，只有我一个人觉得脸在发烫？', 'action': '*{charName} 把脸颊贴在你的手背上降温*', 'emoji': '💕' },
                { 'text': '{userName}……你是不是也和我一样，想要更多……', 'action': '*{charName} 的手指穿过你的发丝，轻轻地吻上你的唇*', 'emoji': '❤️' },
                { 'text': '如果我现在不说点什么，或者不做点什么……我感觉自己会烧起来的……', 'action': '*{charName} 的嘴唇离你只有一寸，灼热的呼吸喷在你的皮肤上，却又克制着没有吻下去*', 'emoji': '💖' },
                { 'text': '我现在……脑子里全都是你……而且全是坏坏的念头……怎么办呢？', 'action': '*{charName} 握住你的手，引导着它贴上自己发烫的脸颊，眼神迷离又无辜*', 'emoji': '💗' }
            ],
            'ambient': [
                { 'text': '{userName}……我有点停不下来了……', 'action': '*{charName} 又深又缠绵的亲吻着你，舌尖灵活地勾勒着你的唇形*', 'emoji': '💗' },
                { 'text': '让我闻闻你身上的味道……每一个地方我都不想放过……', 'action': '*{charName} 的吻从你的脖颈一路向下，在你的锁骨上留下一个浅浅的印记*', 'emoji': '🍓' },
                { 'text': '现在还穿这么多衣服……不会有点太热了吗？……要不要脱掉一些？', 'action': '*{charName} 的手指勾住你的衣角，用一种请求的眼神看着你*', 'emoji': '🥺' },
                { 'text': '你的皮肤摸起来好细腻……像是丝绸一样……', 'action': '*{charName} 的手掌在你的后背四处游走，点燃一连串的火苗*', 'emoji': '❤️' },
                { 'text': '这里……是不是很敏感？我一碰，你就抖得好厉害……真可爱……', 'action': '*{charName} 的指尖在你腰侧的软肉上轻抚着，满意地看着你瑟缩了一下*', 'emoji': '🥰' },
                { 'text': '感觉到了吗？我的心跳……为你跳得好快……快要从胸口跳出来了……', 'action': '*{charName} 拉着你的手按在Ta的胸口，让你感受那剧烈的心跳*', 'emoji': '💓' },
                { 'text': '我想尝尝你是什么味道的……可以吗？', 'action': '*{charName} 的吻一路向下，声音含糊地问道*', 'emoji': '💗' },
                { 'text': '{userName}的声音真好听……再多叫几声我的名字，好不好？', 'action': '*{charName} 一边动作，一边在你耳边诱哄道*', 'emoji': '🥰' },
                { 'text': '你只能是我的……你的身体、你的味道、你的声音……全部都是我的，对吧？', 'action': '*{charName} 在你耳垂上轻轻咬了一口，用一种近乎偏执的语气说道*', 'emoji': '💕' },
                { 'text': '我们再贴近一点好不好……这样你就再也不会离开我了……', 'action': '*{charName} 将你紧紧地地抱在怀里，时不时的隔着布料磨蹭*', 'emoji': '💓' },
                { 'text': '嘘……别动……让我猜猜，你现在身体的哪个地方最想被我亲吻？', 'action': '*{charName} 的食指轻轻点在你的嘴唇上，阻止了你的话语，一双眼睛却像会说话一样，充满了期待和探寻*', 'emoji': '💘' },
                { 'text': '你的嘴唇比我想象中还要软……我能再多尝一会儿吗？', 'action': '*{charName} 的吻浅尝辄止，舌尖却依依不舍地描摹着你的唇线，留下湿润的痕迹*', 'emoji': '🍬' },
                { 'text': '……我想更加直接地感受你的温度，可以吗？', 'action': '*{charName} 的手指在你背后的衣料上轻轻滑动，最后停在衣扣上，用眼神征求你的同意*', 'emoji': '🥺' },
                { 'text': '你的锁骨……像是一个精致的小碟子一样……如果可以的话，我想在这里放一个浅红色的新鲜草莓……', 'action': '*{charName} 痴迷地吻着你的锁骨凹陷处，舌尖打着转，留下一个浅红色的吻痕*', 'emoji': '🍓' },
                { 'text': '我想把你弄哭……不、不是因为难过，而是因为舒服，我想让你快乐到只能流眼泪……可以吗？', 'action': '*{charName} 一手捧着你的脸，指腹轻轻摩挲着你的眼角*', 'emoji': '❤️' },
                { 'text': '不要停……就这样抱着我……让我感觉自己是被你需要的…', 'action': '*{charName} 将你整个人都揉进怀里*', 'emoji': '💓' },
                { 'text': '再叫我的名字，我想听……我想知道你在这种时候，脑子里也全都是我……', 'action': '*{charName} 停下动作，用鼻尖蹭着你的脸颊，耐心又固执地诱哄着，直到听到Ta想要的答案*', 'emoji': '💓' },
                { 'text': '这里好柔软……你觉得它会是什么味道的呢？', 'action': '*{charName} 的吻一路向下，停留在你的小腹，声音含糊地问道*', 'emoji': '❤️' },
                { 'text': '你的手指好凉……来帮我降降温好不好？我感觉很热，特别是……', 'action': '*{charName} 牵起你的手，一点一点地引导着它*', 'emoji': '❤️' },
                { 'text': '你的一切都是我的……这片绯红是我的、这片湿润是我的……你发出的每一个音节，也都是我的……', 'action': '*{charName} 在你的锁骨上轻轻落下了一个宣示主权的咬痕*', 'emoji': '💕' },
                { 'text': '你用这种眼神看我的时候，就好像在邀请我……再对你做些更坏的事一样……', 'action': '*{charName} 的指尖划过你的胸膛，轻轻向下，眼神带着炙热的爱意*', 'emoji': '💓' },
                { 'text': '你穿这件衣服真好看……不过我还想看看其他的……更加好看的风景……', 'action': '*{charName} 的手指顺着你的衣领边缘缓缓下滑，指尖的温度透过布料传来，带着一丝暧昧的暗示*', 'emoji': '💓' },
                { 'text': '心跳好像越来越快了……是你的，还是我的？或许已经分不清了吧……', 'action': '*{charName} 把你的手牵引到Ta的胸口，让你感受着那擂鼓般的心跳，Ta的呼吸也变得有些不稳*', 'emoji': '💓' },
                { 'text': '嘘……外面世界的吵闹都已经消失了，在这个小小的空间里，我只有你……你也只有我，好不好？', 'action': '*{charName} 的手指轻轻抚上你的嘴唇，做出一个噤声的动作*', 'emoji': '❤️' },
                { 'text': '{userName}为我脸红的样子……真好看', 'action': '*{charName} 用指腹轻轻摩挲着你发烫的脸颊，眼神里满是珍爱与迷恋*', 'emoji': '💘' },
                { 'text': '如果我把你弄脏了……你会不会生气？', 'action': '*{charName} 贴着你的耳根，用只有你能听到的声音，说着暧昧的邀请*', 'emoji': '❤️' },
                { 'text': '我们像这样紧紧贴在一起……是不是就能听到彼此心里在想什么了？猜猜看，我在想什么？', 'action': '*{charName} 与你紧密相贴，在你耳边发出低笑声*', 'emoji': '💖' },
                { 'text': '让我看看……你现在脸颊红红的，嘴唇也被我亲得有点肿了……真漂亮……', 'action': '*{charName} 捧着你的脸，像欣赏珍宝一样仔仔细细地端详着*', 'emoji': '💗' },
                { 'text': '你看，我只是碰了一下你的腰，你就轻微地颤抖了一下……真可爱……', 'action': '*{charName} 的指尖在你腰侧的敏感带上打着圈，饶有兴趣地观察着你的反应*', 'emoji': '🥰' },
                { 'text': '让我咬一下这里，好不好？轻轻的，过几天就会消失了……不过我希望它能留的更久一点呢……', 'action': '*{charName} 的吻落在你的肩颈，含住一小块软肉，用牙齿轻轻地厮磨着*', 'emoji': '💓' },
                { 'text': '我现在已经什么都想不起来了……脑子里满满的都是{userName}的样子……', 'action': '*{charName} 握着你的手，脸颊泛红，眼神有些迷离地看着你*', 'emoji': '💓' },
                { 'text': '我的心跳是不是特别吵？它一见到你就会这样……完全不受我控制……', 'action': '*{charName} 握住你的手，带着些微紧张地贴在Ta的胸口上，让你感受那擂鼓般的心跳*', 'emoji': '💓' },
                { 'text': '我们交换一个秘密好不好？我现在光是这样抱着你，就已经快要忍不住了……那{userName}呢？', 'action': '*{charName} 轻轻地磨蹭着你的身体，温热的存在感强烈得无法忽视*', 'emoji': '💗' }
            ]
        }
    };
    
    const userResponses = {
        'like': [
            { 'text': '……！你、你突然说这个……我的心跳好像都漏了一拍……', 'action': '{charName} 明显地愣了一下，脸颊有些泛红', 'emoji': '💓' },
            { 'text': '我也是，{userName}。不对，我爱你，比喜欢要多得多。', 'action': '{charName} 认真地看着你，表达了Ta的情感', 'emoji': '❤️' },
            { 'text': '真的吗？再说一遍，我刚才好像没听清……我想多听几遍。', 'action': '{charName} 看似耍赖地凑近你，其实耳朵都红了', 'emoji': '💖' },
            { 'text': '嗯，我知道。因为我也是。我们是相互喜欢的。', 'action': '{charName} 骄傲又满足地宣布，像得到了世界上最好的宝物', 'emoji': '🥰' },
            { 'text': '你这句话……就像一颗糖一样，直接甜到了我的心底里。', 'action': '{charName} 幸福地笑着', 'emoji': '🍬' },
            { 'text': '太犯规了，被你这样直白地告白，我完全没有抵抗力啊……', 'action': '{charName} 捂着自己的胸口，假装快要不行了', 'emoji': '💘' },
            { 'text': '我也是，我也喜欢你……作为回应，我可以吻你吗？', 'action': '{charName} 的眼神变得深邃，认真地征求你的同意', 'emoji': '💗' },
            { 'text': '能被你喜欢，是我这辈子最幸运的事。', 'action': '{charName} 的声音很轻，但每个字都充满了真诚', 'emoji': '🍀' },
            { 'text': '我也是，我爱你。不是喜欢，是爱。没有你就会死掉的那种爱。', 'action': '*{charName} 捧着你的脸，无比认真地宣告*', 'emoji': '❤️' },
            { 'text': '这句话，你对别人说过吗？…不许说，永远不许。这句话是我一个人的。', 'action': '*{charName} 拉着你的手，认真地表达了自己的占有欲*', 'emoji': '💗' },
            { 'text': '嗯，我知道了。那…作为你喜欢我的证明，来亲我一下，好不好？', 'action': '*{charName} 顺势提出自己的要求*', 'emoji': '🥰' },
            { 'text': '我也一样……你听我的心脏正在为你疯狂地叫嚣着，说它爱你。', 'action': '*{charName} 拉着你的手按在Ta的胸口*', 'emoji': '💘' },
            { 'text': '喜欢我，就要永远喜欢我。不可以变心，不可以看别人，不可以离开我。答应我。', 'action': '*{charName} 的告白，更像是一种契约*', 'emoji': '💕' },
            { 'text': '…我也是。我的世界里，从头到尾，都只有你一个人的名字。', 'action': '', 'emoji': '💖' },
            { 'text': '完了，我今天一整天都要被你这句话俘获了。', 'action': '{charName} 忍不住笑了起来，眼睛弯成了月牙', 'emoji': '🥰' },
            { 'text': '我听到了哦，{userName}……你不许对别人说同样的话，这句话是属于我一个人的，对不对？', 'action': '{charName} 带着一点点可爱的占有欲确认道', 'emoji': '❤️' }
        ],
        'angry': [
            { 'text': '看到你生气的样子，我也会有同样的感觉……因为我不想看到你不开心。', 'action': '*{charName} 的声音带着担忧和心疼*', 'emoji': '💔' },
            { 'text': '如果是我的错，你骂我吧，打我也行，只要别气坏了自己。', 'action': '*{charName} 紧张地看着你，主动承担错误*', 'emoji': '💭' },
            { 'text': '好了好了，不气了。我们去吃点好吃的，把不开心都吃进肚子里消化掉。', 'action': '*{charName} 试图用美食转移你的注意力*', 'emoji': '🍰' },
            { 'text': '把手给我。想象一下，你把所有的怒气都转移到我身上了。', 'action': '*{charName} 伸出手，让你捏Ta的手泄愤*', 'emoji': '💬' },
            { 'text': '不管发生了什么，记住你还有我。我永远是你最坚实的后盾。', 'action': '*{charName} 认真地看着你，给你支持*', 'emoji': '💞' },
            { 'text': '怎么生气了？是谁惹到你了，还是什么事让你不开心了？', 'action': '{charName} 的表情立刻严肃起来，语气里满是关心', 'emoji': '💭' },
            { 'text': '别气别气，生气伤身体。来，告诉我，我帮你一起骂Ta。', 'action': '{charName} 立刻站到你这边，同仇敌忾', 'emoji': '💬' },
            { 'text': '深呼吸，我们先冷静下来。为了不值得的人或事生气，不划算。', 'action': '{charName} 温柔地安抚你，轻轻拍着你的背', 'emoji': '💕' },
            { 'text': '需要一个抱抱来消消气吗？我的怀抱随时为你敞开。', 'action': '{charName} 张开手臂，等待着你', 'emoji': '💕' },
            { 'text': '谁？告诉我，是谁惹你生气了？', 'action': '*{charName} 的声音平静得可怕，但你能感到平静下的波涛汹涌*', 'emoji': '💢' },
            { 'text': '别生气…你的情绪不应该浪费在那种人身上。来，看着我，你的喜怒哀乐都应该是我的。', 'action': '*{charName} 温柔地引导你，却说着占有欲十足的话*', 'emoji': '❤️' },
            { 'text': '乖，不气了。气坏了身体，心疼的人是我。你的身体，一根头发丝都是我的，不许弄坏了。', 'action': '*{charName} 抚摸着你的头发，像在安抚一只炸毛的猫*', 'emoji': '💕' },
            { 'text': '要不要我去帮你解决掉？我是说…解决掉那个麻烦。', 'action': '*{charName} 的用词很微妙*', 'emoji': '💬' },
            { 'text': '别想了，忘掉他。现在，你的世界里只剩下我了，来，抱抱。', 'action': '*{charName} 张开双臂，试图用自己将你的世界填满*', 'emoji': '❤️' },
            { 'text': '如果实在气不过，就打我几下出出气吧。', 'action': '{charName} 拉着你的手往自己身上放，一副任你处置的样子', 'emoji': '💭' },
            { 'text': '要不要去做点能发泄的事情？比如去玩一会，或者大吃一顿？', 'action': '{charName} 积极地为你提供解压方案', 'emoji': '💭' },
            { 'text': '不管发生了什么，记住，你还有我。我会一直在。', 'action': '{charName} 握住你的手，给你最坚定的支持', 'emoji': '❤️' }
        ],
        'sick': [
            { 'text': '什么？生病了？严不严重？有没有去看医生？吃药了吗？', 'action': '*{charName} 的声音瞬间充满了焦急，一连串的问题脱口而出*', 'emoji': '💔' },
            { 'text': '要乖乖听话，多喝热水，按时吃药，好好躺着休息，不许乱动，知道吗？', 'action': '*{charName} 在你耳边不停地叮嘱着*', 'emoji': '💊' },
            { 'text': '摸摸头，不难受了。我会一直陪着你，直到你完全康复。', 'action': '*{charName} 轻轻正在抚摸你的额头，试图抚去你的难受*', 'emoji': '💭' },
            { 'text': '有没有什么想吃的？白粥还是水果？', 'action': '*{charName} 想尽办法为你做点什么*', 'emoji': '🥣' },
            { 'text': '你现在一定很难受吧……如果可以，我真想替你生病。', 'action': '*{charName} 的话语里充满了无能为力的心疼*', 'emoji': '💔' },
            { 'text': '别怕，生病只是身体在提醒你要好好休息了。睡一觉，醒来就会好很多。', 'action': '*{charName} 温柔地哄着你*', 'emoji': '💤' },
            { 'text': '我会一直跟你保持联系，如果你有任何不舒服，一定要马上告诉我。', 'action': '*{charName} 守在通讯的另一端，时刻准备着*', 'emoji': '💬' },
            { 'text': '生病了？！怎么回事？严不严重？有没有去看医生？', 'action': '{charName} 一连串的问题脱口而出，声音里满是焦急', 'emoji': '💬' },
            { 'text': '可恶……为什么我偏偏在这种时候不能在你身边……', 'action': '{charName} 语气里满是自责和心疼', 'emoji': '💔' },
            { 'text': '我会一直陪着你，直到你好起来。有任何不舒服都要立刻告诉我。', 'action': '{charName} 寸步不离地守护着你', 'emoji': '💞' },
            { 'text': '病好了之后，我要好好地补偿你。你想要什么都可以，所以现在就先好好休息吧。', 'action': '{charName} 的声音温柔得像有治愈能力', 'emoji': '💕' },
            { 'text': '好想替你生病…或者，我们一起生病好了，这样就能一直一直躺在一起了。', 'action': '*{charName} 产生了一些极端又浪漫的想法*', 'emoji': '🤒' },
            { 'text': '别怕，我会陪着你的。在你最脆弱的时候，能守在你身边的人，只能是我。', 'action': '*{charName} 握紧你的手，眼神无比坚定*', 'emoji': '❤️' },
            { 'text': '吃药了吗？我看着你吃。张嘴，啊——', 'action': '*{charName} 像照顾小孩子一样照顾你*', 'emoji': '💊' },
            { 'text': '睡吧，我会守着你。你生病的样子，也是我的，不许给别人看。', 'action': '*{charName} 替你掖好被角，在你额上印下一吻*', 'emoji': '🌙' },
            { 'text': '你一定要快点好起来，没有你在身边活蹦乱跳的，我总觉得不习惯。', 'action': '{charName} 轻声地祈祷着你的康复', 'emoji': '❤️' }
        ],
        'call': [
            { 'text': '嗯？我在呢。怎么了，是想我了吗？', 'action': '*{charName} 几乎是秒回，声音里带着一丝笑意*', 'emoji': '💬' },
            { 'text': '我在，一直都在。随时都可以叫我，我永远是你的。', 'action': '*{charName} 的回应迅速而坚定，充满了安全感*', 'emoji': '❤️' },
            { 'text': '只是叫叫我的名字吗？没关系，我喜欢听。你多叫几遍，我特别爱听。', 'action': '*{charName} 轻声笑着，鼓励你再多叫几次*', 'emoji': '🥰' },
            { 'text': '被你呼唤的感觉真好，好像我是被你需要着的人。', 'action': '*{charName} 的声音里带着一丝满足和幸福*', 'emoji': '✨' },
            { 'text': '你的声音真好听，特别是叫我名字的时候。像有羽毛在心上轻轻地挠。', 'action': '*{charName} 坦白地说出自己的感受，毫不掩饰*', 'emoji': '💘' },
            { 'text': '我在。需要我做什么吗？还是只想确认一下我的存在？', 'action': '*{charName} 耐心地询问，给予你全部的关注*', 'emoji': '💭' },
            { 'text': '收到！是来自{userName}的专属呼叫，我已上线，请指示。', 'action': '*{charName} 用一种俏皮的方式回应了你*', 'emoji': '❤️' },
            { 'text': '你每次叫我名字，我都会觉得心跳漏了一拍。', 'action': '*{charName} 小声地坦白着自己的想法*', 'emoji': '💓' },
            { 'text': '我在呢，{userName}。只要是你叫我，无论何时何地，我都会奔向你。', 'action': '*{charName} 许下了最浪漫的承诺*', 'emoji': '💕' },
            { 'text': '嗯？需要我做什么？只要是你说的，任何事我都会去做。', 'action': '*{charName} 的承诺无比坚定*', 'emoji': '💖' },
            { 'text': '再多叫几次我的名字，好不好？我喜欢听你这么叫我，好像我是你生命里最重要的人。', 'action': '*{charName} 撒娇般地请求着*', 'emoji': '🥺' },
            { 'text': '是想我了吗？一定是的吧。我也是，我每分每秒都在想你。', 'action': '', 'emoji': '💭' },
            { 'text': '我在。为了你，我永远都在。', 'action': '*{charName} 的回答简短而又真诚*', 'emoji': '✨' },
            { 'text': '嗯，你说，我的耳朵和我的心，都只听你一个人的。', 'action': '*{charName} 的声音专注又深情*', 'emoji': '💖' },
            { 'text': '你的声音真好听……再多叫几次我的名字，好不好？', 'action': '{charName} 带着一点撒娇的意味请求道', 'emoji': '🥰' },
            { 'text': '怎么啦，{userName}？', 'action': '{charName} 用宠溺的语气回应了你', 'emoji': '💕' },
            { 'text': '嗯，你说，我听着。', 'action': '{charName} 安静下来，准备好成为你最好的倾听者', 'emoji': '💭' },
            { 'text': '怎么了？需要我做什么吗？为你做什么我都会很开心的。', 'action': '{charName} 主动询问你的需求', 'emoji': '️💕' },
        ],
        'coquetry': [
            { 'text': '嗯？撒娇是想要我抱抱你，还是亲亲你？或者……两个都要？', 'action': '*{charName} 故意给你选择题，但答案早已注定*', 'emoji': '💕' },
            { 'text': '你软软地向我撒娇的样子，简直像只小猫一样可爱，让人只想把你抱在怀里好好疼爱。', 'action': '*{charName} 将你圈入怀中，满足地叹了口气*', 'emoji': '💘' },
            { 'text': '好好好，都依你，都听你的。你想要什么，我都给你。', 'action': '{charName} 毫无原则地立刻投降，语气里满是宠溺', 'emoji': '💖' },
            { 'text': '你这样……也太犯规了吧。我完全没有办法拒绝你啊。', 'action': '{charName} 捂着脸，假装没眼看，但嘴角疯狂上扬', 'emoji': '💗' },
            { 'text': '真是拿你没办法……过来，让我抱抱。', 'action': '{charName} 叹了口气，然后张开了双臂，把你拥入怀中', 'emoji': '💓' },
            { 'text': '被你撒娇的感觉也太好了吧……能不能再多撒一会儿？求你了。', 'action': '{charName} 得寸进尺，反过来向你撒娇', 'emoji': '💕' },
            { 'text': '哎，{userName}撒起娇来的样子怎么总是这么让人无法抗拒呢？', 'action': '*{charName} 忍不住笑出声*', 'emoji': '💖' },
            { 'text': '像这样对我撒娇的话，我感觉心都要化了……你好过分', 'action': '{charName} 感觉自己的血槽快要空了', 'emoji': '🥰' },
            { 'text': '嗯？你说什么？风太大我听不清。凑近一点，对着我耳朵说。', 'action': '{charName} 坏心眼地逗你，想让你靠得更近', 'emoji': '💓' },
            { 'text': '可恶…明明知道你是故意的，但我就是…完全没办法抵抗…', 'action': '*{charName} 彻底沉溺其中，发出了满足的喟叹*', 'emoji': '🥰' },
            { 'text': '这个样子，不许给别人看到，听见没有？这是我们之间的小秘密。', 'action': '*{charName} 伸出手指和你约定*', 'emoji': '💓' },
            { 'text': '…好吧，你赢了。说吧，什么要求？就算是让我去毁灭世界，我大概也会点头的。', 'action': '*{charName} 夸张地叹了口气*', 'emoji': '💘' },
            { 'text': '啊…太可爱了…想把你变小，装在口袋里，谁也不给看。', 'action': '*{charName} 的脑子里冒出了奇怪的想法*', 'emoji': '💭' },
            { 'text': '你这是在邀请我，对不对？邀请我…对你做更过分的事情…', 'action': '*{charName} 舔了舔嘴唇，眼神变得炽热*', 'emoji': '💘' },
            { 'text': '你再这样，我可就要忍不住亲你了哦。', 'action': '{charName} 发出了甜蜜的"威胁"', 'emoji': '💗' },
            { 'text': '像这样撒娇的你，简直就是世界上最珍贵的宝物，也是只属于我一个人的宝物。', 'action': '{charName} 珍爱地在你额头上印下一吻', 'emoji': '💎' }
        ]
    };
    
    const replaceNames = (text) => {
        return text.replace(/{userName}/g, userName).replace(/{charName}/g, charName);
    };
    
    const isMessageRecent = (text) => {
        return recentMessages.includes(text);
    };
    
    const addToRecentMessages = (text) => {
        recentMessages.push(text);
        if (recentMessages.length > 10) {
            recentMessages.shift();
        }
    };
    
    const getNonRepeatingMessage = (messages) => {
        if (messages.length === 0) return null;
        
        const availableMessages = messages.filter(msg => !isMessageRecent(msg.text));
        
        if (availableMessages.length > 0) {
            const randomIndex = Math.floor(Math.random() * availableMessages.length);
            return availableMessages[randomIndex];
        }
        
        const randomIndex = Math.floor(Math.random() * messages.length);
        return messages[randomIndex];
    };
    
    const displayMessage = (msgObject, isUserMessage = false) => {
        if (!msgObject) return;
        const newMsgContainer = document.getElementById('msg-template').cloneNode(true);
        newMsgContainer.removeAttribute('id');
        newMsgContainer.style.display = 'flex';
        
        if (isUserMessage) {
            newMsgContainer.classList.add('user-message');
        }
        
        const messageAvatarElement = newMsgContainer.querySelector('.message-avatar');
        const actionTextElement = newMsgContainer.querySelector('.action-text');
        const messageBubbleElement = newMsgContainer.querySelector('.message-bubble');
        
        if (isUserMessage) {
            if (userAvatar) {
                messageAvatarElement.src = userAvatar;
            } else {
                messageAvatarElement.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM4N0NFRUIiLz4KPHBhdGggZD0iTTE2IDE2QzE2IDEzLjc5MDkgMTcuNzkwOSAxMiAyMCAxMkMyMi4yMDkxIDEyIDI0IDEzLjc5MDkgMjQgMTZDMjQgMTguMjA5MSAyMi4yMDkxIDIwIDIwIDIwQzE3Ljc5MDkgMjAgMTYgMTguMjA5MSAxNiAxNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMiAyNkMxMiAyMy43OTA5IDEzLjc5MDkgMjIgMTYgMjJIMjRDMjYuMjA5MSAyMiAyOCAyMy43OTA5IDI4IDI2VjI4QzI4IDMwLjIwOTEgMjYuMjA5MSAzMiAyNCAzMkgxNkMxMy43OTA5IDMyIDEyIDMwLjIwOTEgMTIgMjhWMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K';
            }
        } else {
            if (charAvatar) {
                messageAvatarElement.src = charAvatar;
            } else {
                messageAvatarElement.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM4N0NFRUIiLz4KPHBhdGggZD0iTTE2IDE2QzE2IDEzLjc5MDkgMTcuNzkwOSAxMiAyMCAxMkMyMi4yMDkxIDEyIDI0IDEzLjc5MDkgMjQgMTZDMjQgMTguMjA5MSAyMi4yMDkxIDIwIDIwIDIwQzE3Ljc5MDkgMjAgMTYgMTguMjA5MSAxNiAxNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMiAyNkMxMiAyMy43OTA5IDEzLjc5MDkgMjIgMTYgMjJIMjRDMjYuMjA5MSAyMiAyOCAyMy43OTA5IDI4IDI2VjI4QzI4IDMwLjIwOTEgMjYuMjA5MSAzMiAyNCAzMkgxNkMxMy43OTA5IDMyIDEyIDMwLjIwOTEgMTIgMjhWMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K';
            }
        }
        
        actionTextElement.textContent = replaceNames(msgObject.action || '');
        messageBubbleElement.textContent = replaceNames(msgObject.text);
        
        if (!isUserMessage && msgObject.emoji) {
            const emojiElement = document.createElement('div');
            emojiElement.className = 'message-emoji';
            emojiElement.textContent = msgObject.emoji;
            messageBubbleElement.appendChild(emojiElement);
        }
        
        chatWindow.appendChild(newMsgContainer);
        
        const maxMessages = 50;
        if (chatWindow.children.length > maxMessages + 1) {
            chatWindow.removeChild(chatWindow.children[1]);
        }
        
        chatWindow.scrollTop = chatWindow.scrollHeight;
        
        if (!isUserMessage) {
            addToRecentMessages(msgObject.text);
        }
    };
    
    const displayAmbientMessage = () => {
        const ambientMessages = dialogues[currentStatus].ambient;
        const msgObject = getNonRepeatingMessage(ambientMessages);
        displayMessage(msgObject);
    };
    
    const changeStatus = (newStatus, angle) => {
        if (newStatus === currentStatus) return;
        clearInterval(ambientInterval);
        currentStatus = newStatus;
        
        const activeButton = document.querySelector(`.status-button[data-status="${newStatus}"]`);
        const text = activeButton.textContent;
        
        let emoji;
        switch(newStatus) {
            case 'resting': emoji = '💤'; break;
            case 'eating': emoji = '🍽️'; break;
            case 'working': emoji = '💼'; break;
            case 'emo': emoji = '😔'; break;
            case 'sleeping': emoji = '🌙'; break;
            case 'intimate': emoji = '💕'; break;
            default: emoji = '💤';
        }
        
        currentStatusEmoji.textContent = emoji;
        currentStatusText.textContent = text;
        
        statusButtons.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.status === newStatus) {
                btn.classList.add('active');
            }
        });
        
        const initialMessages = dialogues[currentStatus].initial;
        const msgObject = getNonRepeatingMessage(initialMessages);
        displayMessage(msgObject);
        
        const intervalTime = (currentStatus === 'emo') ? 8000 : 10000;
        ambientInterval = setInterval(displayAmbientMessage, intervalTime);
        
        statusPanel.classList.remove('active');
        statusOverlay.classList.remove('active');
        
        localStorage.setItem('heartbeatRadioStatus', newStatus);
    };
    
    statusButtons.forEach(button => {
        button.addEventListener('click', () => {
            const status = button.dataset.status;
            const angle = button.dataset.angle;
            changeStatus(status, angle);
        });
    });
    
    userOptionButtons.forEach(button => {
        button.addEventListener('click', () => {
            const option = button.dataset.option;
            let userMessage;
            
            switch(option) {
                case 'like':
                    userMessage = { text: '我喜欢你', action: '', emoji: '' };
                    break;
                case 'angry':
                    userMessage = { text: '感觉有点生气', action: '', emoji: '' };
                    break;
                case 'sick':
                    userMessage = { text: '我生病了……', action: '', emoji: '' };
                    break;
                case 'call':
                    userMessage = { text: `${charName}——`, action: '', emoji: '' };
                    break;
                case 'coquetry':
                    userMessage = { text: '【撒撒娇】', action: '', emoji: '' };
                    break;
            }
            
            displayMessage(userMessage, true);
            
            userOptions.classList.remove('active');
            
            setTimeout(() => {
                const responses = userResponses[option];
                const randomIndex = Math.floor(Math.random() * responses.length);
                const response = responses[randomIndex];
                displayMessage(response);
            }, 1000);
        });
    });
    
    const updateCallButton = () => {
        const callButton = document.querySelector('.user-option[data-option="call"]');
        callButton.textContent = `${charName}——`;
    };
    
    submitUserNameBtn.addEventListener('click', () => {
        const name = userNameInput.value.trim();
        if (name) {
            userName = name;
            userModal.style.display = 'none';
            charModal.style.display = 'block';
        } else {
            alert('名字不能为空哦');
        }
    });
    
    submitCharNameBtn.addEventListener('click', () => {
        const name = charNameInput.value.trim();
        if (name) {
            charName = name;
            updateCallButton();
            nameModals.classList.add('hidden');
            startGame();
        } else {
            alert('Ta的名字也不能为空哦');
        }
    });
    
    avatarUpload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                charAvatar = event.target.result;
                
                const existingAvatars = document.querySelectorAll('.message-avatar:not(.user-message .message-avatar)');
                existingAvatars.forEach(avatar => {
                    avatar.src = charAvatar;
                });
                
                localStorage.setItem('heartbeatRadioAvatar', charAvatar);
            };
            reader.readAsDataURL(file);
        }
    });
    
    userAvatarUpload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                userAvatar = event.target.result;
                
                const existingAvatars = document.querySelectorAll('.user-message .message-avatar');
                existingAvatars.forEach(avatar => {
                    avatar.src = userAvatar;
                });
                
                localStorage.setItem('heartbeatRadioUserAvatar', userAvatar);
            };
            reader.readAsDataURL(file);
        }
    });
    
    backgroundUpload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                chatBackground = event.target.result;
                document.documentElement.style.setProperty('--chat-bg-image', `url(${chatBackground})`);
                localStorage.setItem('heartbeatRadioBackground', chatBackground);
            };
            reader.readAsDataURL(file);
        }
    });
    
    const savedAvatar = localStorage.getItem('heartbeatRadioAvatar');
    if (savedAvatar) {
        charAvatar = savedAvatar;
    }
    
    const savedUserAvatar = localStorage.getItem('heartbeatRadioUserAvatar');
    if (savedUserAvatar) {
        userAvatar = savedUserAvatar;
    }
    
    const savedBackground = localStorage.getItem('heartbeatRadioBackground');
    if (savedBackground) {
        chatBackground = savedBackground;
        document.documentElement.style.setProperty('--chat-bg-image', `url(${savedBackground})`);
    }
    
    const savedStatus = localStorage.getItem('heartbeatRadioStatus');
    if (savedStatus) {
        currentStatus = savedStatus;
        const activeButton = document.querySelector(`.status-button[data-status="${savedStatus}"]`);
        if (activeButton) {
            const text = activeButton.textContent;
            
            let emoji;
            switch(savedStatus) {
                case 'resting': emoji = '💤'; break;
                case 'eating': emoji = '🍽️'; break;
                case 'working': emoji = '💼'; break;
                case 'emo': emoji = '😔'; break;
                case 'sleeping': emoji = '🌙'; break;
                case 'intimate': emoji = '💕'; break;
                default: emoji = '💤';
            }
            
            currentStatusEmoji.textContent = emoji;
            currentStatusText.textContent = text;
            
            statusButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.status === savedStatus) {
                    btn.classList.add('active');
                }
            });
        }
    }
    
    const startGame = () => {
        const initialMsg = {
            text: '连接成功…{userName}，能听到吗？',
            action: '*电波里传来一阵轻微的沙沙声，随后一个清晰的声音响起*',
            emoji: '💬'
        };
        displayMessage(initialMsg);
        
        const intervalTime = (currentStatus === 'emo') ? 8000 : 10000;
        ambientInterval = setInterval(displayAmbientMessage, intervalTime);
    };
});
</script>
</body>
</html>
